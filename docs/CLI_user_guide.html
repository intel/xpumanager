<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intel(R) XPU Manager Command Line Interface User Guide &mdash; XPU Manager  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/doxyrest-pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/target-highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Restful API" href="restful.html" />
    <link rel="prev" title="XPUM REST API Setup Guide" href="REST_README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> XPU Manager
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="xpum_index.html">XPUM Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">Intel(R) XPU Manager and XPU System Management Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Intel(R) XPU Manager Command Line Interface User Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#intel-r-xpu-manager-command-line-interface-main-features">Intel(R) XPU Manager Command Line Interface main features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#help-info">Help info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#discover-the-devices-in-this-machine">Discover the devices in this machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manage-the-devices-in-groups">Manage the devices in groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-and-change-xpu-manager-settings">Get and change XPU Manager settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-the-aggregated-device-statistics">Get the aggregated device statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-the-device-health-status">Get the device health status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dump-the-device-statistics-in-csv-format">Dump the device statistics in CSV format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-statistics-supported-by-intel-data-center-gpus">The Statistics supported by Intel data center GPUs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#get-the-system-topology">Get the system topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="#update-the-gpu-firmware">Update the GPU firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-and-change-the-gpu-settings">Get and change the GPU settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-and-set-the-policy-automatic-action-triggered-by-the-condition">Get and set the policy, automatic action triggered by the condition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diagnose-gpu-with-different-test-suites">Diagnose GPU with different test suites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-amc-real-time-sensor-readings">Show AMC real-time sensor readings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collect-the-gpu-debug-log-files">Collect the GPU debug log files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-gpu-sr-iov-configuration">Set up GPU SR-IOV configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bios-settings-for-gpu-sr-iov">BIOS settings for GPU SR-IOV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-linux-kernel-command-line-options">Add Linux kernel command line options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#help-info-of-gpu-sr-iov-configuration-feature">Help info of GPU SR-IOV configuration feature.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gpu-sr-iov-precheck">GPU SR-IOV precheck</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-the-linux-kernel-command-line-parameters-for-the-virtual-gpus">Add the Linux kernel command line parameters for the virtual GPUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-the-virtual-gpus">Create the virtual GPUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-the-virtual-gpus">list the virtual GPUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-all-the-virtual-gpus-on-the-specified-gpu">Remove all the virtual GPUs on the specified GPU</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-advanced-configuration-of-virtual-gpus">The advanced configuration of virtual GPUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="restful.html">Restful API</a></li>
<li class="toctree-l2"><a class="reference internal" href="xpumdoc/rst/index.html">Core Library API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="smi_index.html">XPU-SMI Linux Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="win_index.html">XPU-SMI Windows Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">XPU Manager</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="xpum_index.html">XPUM Documentation</a> &raquo;</li>
      <li>Intel(R) XPU Manager Command Line Interface User Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="intel-r-xpu-manager-command-line-interface-user-guide">
<h1>Intel(R) XPU Manager Command Line Interface User Guide<a class="headerlink" href="#intel-r-xpu-manager-command-line-interface-user-guide" title="Permalink to this headline"></a></h1>
<p>This guide describes how to use XPU Manager Command Line Interface to manage Intel GPU devices.</p>
<section id="intel-r-xpu-manager-command-line-interface-main-features">
<h2>Intel(R) XPU Manager Command Line Interface main features<a class="headerlink" href="#intel-r-xpu-manager-command-line-interface-main-features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Show the device info.</p></li>
<li><p>Manage multiple devices by the group-level.</p></li>
<li><p>Get lots of raw and aggregated device statistics.</p></li>
<li><p>Get the health status of the device components.</p></li>
<li><p>Get and change the device settings.</p></li>
<li><p>Update the device firmware.</p></li>
<li><p>Set some automatic action when some condition is met.</p></li>
</ul>
</section>
<section id="help-info">
<h2>Help info<a class="headerlink" href="#help-info" title="Permalink to this headline"></a></h2>
<p>Show the XPU Manager CLI help info.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> 
<span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="n">Command</span> <span class="n">Line</span> <span class="n">Interface</span> <span class="o">--</span> <span class="n">v1</span><span class="mf">.0</span> 
<span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="n">Command</span> <span class="n">Line</span> <span class="n">Interface</span> <span class="n">provides</span> <span class="n">the</span> <span class="n">Intel</span> <span class="n">data</span> <span class="n">center</span> <span class="n">GPU</span> <span class="n">model</span> <span class="ow">and</span> <span class="n">monitoring</span> <span class="n">capabilities</span><span class="o">.</span> <span class="n">It</span> <span class="n">can</span> <span class="n">also</span> <span class="n">be</span> <span class="n">used</span> <span class="n">to</span> <span class="n">change</span> <span class="n">the</span> <span class="n">Intel</span> <span class="n">data</span> <span class="n">center</span> <span class="n">GPU</span> <span class="n">settings</span> <span class="ow">and</span> <span class="n">update</span> <span class="n">the</span> <span class="n">firmware</span><span class="o">.</span>  
<span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="ow">is</span> <span class="n">based</span> <span class="n">on</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">oneAPI</span> <span class="n">Level</span> <span class="n">Zero</span><span class="o">.</span> <span class="n">Before</span> <span class="n">using</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">XPU</span> <span class="n">Manager</span><span class="p">,</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">driver</span> <span class="ow">and</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">oneAPI</span> <span class="n">Level</span> <span class="n">Zero</span> <span class="n">should</span> <span class="n">be</span> <span class="n">installed</span> <span class="n">rightly</span><span class="o">.</span>  
 
<span class="n">Supported</span> <span class="n">devices</span><span class="p">:</span> 
  <span class="o">-</span> <span class="n">Intel</span> <span class="n">Data</span> <span class="n">Center</span> <span class="n">GPU</span> 
 
<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="o">-</span><span class="n">v</span>
  <span class="n">xpumcli</span> <span class="o">-</span><span class="n">h</span>
  <span class="n">xpumcli</span> <span class="n">discovery</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                  <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>
  <span class="o">-</span><span class="n">v</span><span class="p">,</span> <span class="o">--</span><span class="n">version</span>               <span class="n">Display</span> <span class="n">version</span> <span class="n">information</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>

<span class="n">Subcommands</span><span class="p">:</span>
  <span class="n">discovery</span>                   <span class="n">Discover</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">devices</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">this</span> <span class="n">machine</span> <span class="ow">and</span> <span class="n">provide</span> <span class="n">the</span> <span class="n">device</span> <span class="n">info</span><span class="o">.</span>
  <span class="n">group</span>                       <span class="n">Group</span> <span class="n">the</span> <span class="n">managed</span> <span class="n">GPU</span> <span class="n">devices</span><span class="o">.</span>
  <span class="n">agentset</span>                    <span class="n">Get</span> <span class="ow">or</span> <span class="n">change</span> <span class="n">some</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="n">settings</span><span class="o">.</span> 
  <span class="n">stats</span>                       <span class="n">List</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">aggregated</span> <span class="n">statistics</span> <span class="n">since</span> <span class="n">last</span> <span class="n">execution</span> <span class="n">of</span> <span class="n">this</span> <span class="n">command</span> <span class="ow">or</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="n">daemon</span> <span class="ow">is</span> <span class="n">started</span><span class="o">.</span>
  <span class="n">health</span>                      <span class="n">Get</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">device</span> <span class="n">component</span> <span class="n">health</span> <span class="n">status</span><span class="o">.</span>
  <span class="n">diag</span>                        <span class="n">Run</span> <span class="n">some</span> <span class="n">test</span> <span class="n">suites</span> <span class="n">to</span> <span class="n">diagnose</span> <span class="n">GPU</span><span class="o">.</span>
  <span class="n">updatefw</span>                    <span class="n">Update</span> <span class="n">GPU</span> <span class="n">firmware</span><span class="o">.</span>
  <span class="n">config</span>                      <span class="n">Get</span> <span class="ow">and</span> <span class="n">change</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">settings</span><span class="o">.</span>
  <span class="n">dump</span>                        <span class="n">Dump</span> <span class="n">device</span> <span class="n">statistics</span> <span class="n">data</span><span class="o">.</span>
  <span class="n">log</span>                         <span class="n">Collect</span> <span class="n">GPU</span> <span class="n">debug</span> <span class="n">logs</span><span class="o">.</span>
  <span class="n">topology</span>                    <span class="n">get</span> <span class="n">the</span> <span class="n">system</span> <span class="n">topology</span>
  <span class="n">policy</span>                      <span class="n">Get</span> <span class="ow">and</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">policies</span><span class="o">.</span>
  <span class="n">amcsensor</span>                   <span class="n">List</span> <span class="n">the</span> <span class="n">AMC</span> <span class="n">real</span><span class="o">-</span><span class="n">time</span> <span class="n">sensor</span> <span class="n">reading</span><span class="o">.</span> 
  <span class="n">vgpu</span>                        <span class="n">Create</span> <span class="ow">and</span> <span class="n">remove</span> <span class="n">virtual</span> <span class="n">GPUs</span> <span class="ow">in</span> <span class="n">SR</span><span class="o">-</span><span class="n">IOV</span> <span class="n">configuration</span><span class="o">.</span>
</pre></div>
</div>
<p>Show XPU Manager version and Level Zero version.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="o">-</span><span class="n">v</span>
<span class="n">CLI</span><span class="p">:</span>
    <span class="n">Version</span><span class="p">:</span> <span class="mf">1.0.0.20211217</span>
    <span class="n">Build</span> <span class="n">ID</span><span class="p">:</span> <span class="n">f847c0fa</span>

<span class="n">Service</span><span class="p">:</span>
    <span class="n">Version</span><span class="p">:</span> <span class="mf">1.0.0.20211217</span>
    <span class="n">Build</span> <span class="n">ID</span><span class="p">:</span> <span class="n">f847c0fa</span>
    <span class="n">Level</span> <span class="n">Zero</span> <span class="n">Version</span><span class="p">:</span> <span class="mf">1.6.2</span>
</pre></div>
</div>
</section>
<section id="discover-the-devices-in-this-machine">
<h2>Discover the devices in this machine<a class="headerlink" href="#discover-the-devices-in-this-machine" title="Permalink to this headline"></a></h2>
<p>Help info of the “discovery” subcommand</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">discovery</span> <span class="o">-</span><span class="n">h</span>

<span class="n">Discover</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">devices</span> <span class="n">installed</span> <span class="n">on</span> <span class="n">this</span> <span class="n">machine</span> <span class="ow">and</span> <span class="n">provide</span> <span class="n">the</span> <span class="n">device</span> <span class="n">info</span><span class="o">.</span> 

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">discovery</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">discovery</span>
  <span class="n">xpumcli</span> <span class="n">discovery</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">discovery</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">discovery</span> <span class="o">--</span><span class="n">listamcversions</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">Device</span> <span class="n">ID</span> <span class="n">to</span> <span class="n">query</span><span class="o">.</span> <span class="n">It</span> <span class="n">will</span> <span class="n">show</span> <span class="n">more</span> <span class="n">detailed</span> <span class="n">info</span><span class="o">.</span>
  <span class="o">--</span><span class="n">pf</span><span class="p">,</span><span class="o">--</span><span class="n">physicalfunction</span>     <span class="n">Display</span> <span class="n">the</span> <span class="n">physical</span> <span class="n">functions</span> <span class="n">only</span><span class="o">.</span>
  <span class="o">--</span><span class="n">vf</span><span class="p">,</span><span class="o">--</span><span class="n">virtualfunction</span>      <span class="n">Display</span> <span class="n">the</span> <span class="n">virtual</span> <span class="n">functions</span> <span class="n">only</span><span class="o">.</span>
  <span class="o">--</span><span class="n">dump</span>                      <span class="n">Property</span> <span class="n">ID</span> <span class="n">to</span> <span class="n">dump</span> <span class="n">device</span> <span class="n">properties</span> <span class="ow">in</span> <span class="n">CSV</span> <span class="nb">format</span><span class="o">.</span> <span class="n">Separated</span> <span class="n">by</span> <span class="n">the</span> <span class="n">comma</span><span class="o">.</span> <span class="s2">&quot;-1&quot;</span> <span class="n">means</span> <span class="nb">all</span> <span class="n">properties</span><span class="o">.</span>
                              <span class="mf">1.</span> <span class="n">Device</span> <span class="n">ID</span>
                              <span class="mf">2.</span> <span class="n">Device</span> <span class="n">Name</span>
                              <span class="mf">3.</span> <span class="n">Vendor</span> <span class="n">Name</span>
                              <span class="mf">4.</span> <span class="n">UUID</span>
                              <span class="mf">5.</span> <span class="n">Serial</span> <span class="n">Number</span>
                              <span class="mf">6.</span> <span class="n">Core</span> <span class="n">Clock</span> <span class="n">Rate</span>
                              <span class="mf">7.</span> <span class="n">Stepping</span>
                              <span class="mf">8.</span> <span class="n">Driver</span> <span class="n">Version</span>
                              <span class="mf">9.</span> <span class="n">GFX</span> <span class="n">Firmware</span> <span class="n">Version</span>
                              <span class="mf">10.</span> <span class="n">GFX</span> <span class="n">Data</span> <span class="n">Firmware</span> <span class="n">Version</span>
                              <span class="mf">11.</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span>
                              <span class="mf">12.</span> <span class="n">PCI</span> <span class="n">Slot</span>
                              <span class="mf">13.</span> <span class="n">PCIe</span> <span class="n">Generation</span>
                              <span class="mf">14.</span> <span class="n">PCIe</span> <span class="n">Max</span> <span class="n">Link</span> <span class="n">Width</span>
                              <span class="mf">15.</span> <span class="n">OAM</span> <span class="n">Socket</span> <span class="n">ID</span>
                              <span class="mf">16.</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span>
                              <span class="mf">17.</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Memory</span> <span class="n">Channels</span>
                              <span class="mf">18.</span> <span class="n">Memory</span> <span class="n">Bus</span> <span class="n">Width</span>
                              <span class="mf">19.</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">EUs</span>
                              <span class="mf">20.</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Media</span> <span class="n">Engines</span>
                              <span class="mf">21.</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Media</span> <span class="n">Enhancement</span> <span class="n">Engines</span>

  <span class="o">--</span><span class="n">listamcversions</span>           <span class="n">Show</span> <span class="nb">all</span> <span class="n">AMC</span> <span class="n">firmware</span> <span class="n">versions</span><span class="o">.</span>
  <span class="o">-</span><span class="n">u</span><span class="p">,</span><span class="o">--</span><span class="n">username</span>               <span class="n">Username</span> <span class="n">used</span> <span class="n">to</span> <span class="n">get</span> <span class="n">AMC</span> <span class="n">version</span> <span class="k">with</span> <span class="n">Redfish</span> <span class="n">Host</span> <span class="n">interface</span>
  <span class="o">-</span><span class="n">p</span><span class="p">,</span><span class="o">--</span><span class="n">password</span>               <span class="n">Password</span> <span class="n">used</span> <span class="n">to</span> <span class="n">get</span> <span class="n">AMC</span> <span class="n">version</span> <span class="k">with</span> <span class="n">Redfish</span> <span class="n">Host</span> <span class="n">interface</span>

</pre></div>
</div>
<p>Discover the devices in this machine</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">discovery</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Device</span> <span class="n">Information</span>                                                                   <span class="o">|</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">0</span>         <span class="o">|</span> <span class="n">Device</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Graphics</span> <span class="p">[</span><span class="mh">0x020a</span><span class="p">]</span>                                              <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Vendor</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Corporation</span>                                                    <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">UUID</span><span class="p">:</span> <span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">020</span><span class="n">a00008086</span>                                           <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.0</span>                                                        <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">physical</span>                                                              <span class="o">|</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Discover the devices in this machine and get the JSON format output</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">discovery</span> <span class="o">-</span><span class="n">j</span>
<span class="p">{</span>
    <span class="s2">&quot;device_list&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;device_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;device_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Intel(R) Graphics [0x020a]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;device_type&quot;</span><span class="p">:</span> <span class="s2">&quot;GPU&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pci_bdf_address&quot;</span><span class="p">:</span> <span class="s2">&quot;0000:4d:00.0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pci_device_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0x20a&quot;</span><span class="p">,</span>
            <span class="s2">&quot;uuid&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-020a00008086&quot;</span><span class="p">,</span>
            <span class="s2">&quot;device_function_type&quot;</span><span class="p">:</span> <span class="s2">&quot;physical&quot;</span><span class="p">,</span>
            <span class="s2">&quot;vendor_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Intel(R) Corporation&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Show the detailed info of one device. The device info includes the model, frequency, driver/firmware info, PCI info, memory info and tile/execution unit info.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">discovery</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Device</span> <span class="n">Information</span>                                                                   <span class="o">|</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">0</span>         <span class="o">|</span> <span class="n">Device</span> <span class="n">Type</span><span class="p">:</span> <span class="n">GPU</span>                                                                     <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Device</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Graphics</span> <span class="p">[</span><span class="mh">0x56c0</span><span class="p">]</span>                                              <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Vendor</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Corporation</span>                                                    <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">UUID</span><span class="p">:</span> <span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">020</span><span class="n">a00008086</span>                                           <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Serial</span> <span class="n">Number</span><span class="p">:</span> <span class="n">unknown</span>                                                               <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Core</span> <span class="n">Clock</span> <span class="n">Rate</span><span class="p">:</span> <span class="mi">2050</span> <span class="n">MHz</span>                                                            <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Stepping</span><span class="p">:</span> <span class="n">C0</span>                                                                         <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span>                                                                                      <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Driver</span> <span class="n">Version</span><span class="p">:</span>                                                                      <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Kernel</span> <span class="n">Version</span><span class="p">:</span> <span class="mf">5.10.54</span><span class="o">+</span><span class="n">prerelease35</span>                                                 <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">GFX</span> <span class="n">Firmware</span> <span class="n">Name</span><span class="p">:</span> <span class="n">GFX</span>                                                               <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">GFX</span> <span class="n">Firmware</span> <span class="n">Version</span><span class="p">:</span> <span class="n">DG02_1</span><span class="mf">.3172</span>                                                    <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">GFX</span> <span class="n">Data</span> <span class="n">Firmware</span> <span class="n">Name</span><span class="p">:</span> <span class="n">GFX_DATA</span>                                                     <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">GFX</span> <span class="n">Data</span> <span class="n">Firmware</span> <span class="n">Version</span><span class="p">:</span> <span class="mh">0x141</span>                                                     <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span>                                                                                      <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.0</span>                                                        <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">PCI</span> <span class="n">Slot</span><span class="p">:</span> <span class="n">Riser</span> <span class="mi">1</span><span class="p">,</span> <span class="n">slot</span> <span class="mi">1</span>                                                            <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">PCIe</span> <span class="n">Generation</span><span class="p">:</span> <span class="mi">4</span>                                                                   <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">PCIe</span> <span class="n">Max</span> <span class="n">Link</span> <span class="n">Width</span><span class="p">:</span> <span class="mi">16</span>                                                              <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span>                                                                                      <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">14248.00</span> <span class="n">MiB</span>                                                   <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Max</span> <span class="n">Mem</span> <span class="n">Alloc</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">4095.99</span> <span class="n">MiB</span>                                                      <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">ECC</span> <span class="n">State</span><span class="p">:</span> <span class="n">enabled</span>                                                                   <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Memory</span> <span class="n">Channels</span><span class="p">:</span> <span class="mi">2</span>                                                         <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Memory</span> <span class="n">Bus</span> <span class="n">Width</span><span class="p">:</span> <span class="mi">128</span>                                                                <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Max</span> <span class="n">Hardware</span> <span class="n">Contexts</span><span class="p">:</span> <span class="mi">65536</span>                                                         <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Max</span> <span class="n">Command</span> <span class="n">Queue</span> <span class="n">Priority</span><span class="p">:</span> <span class="mi">0</span>                                                        <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span>                                                                                      <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">EUs</span><span class="p">:</span> <span class="mi">512</span>                                                                   <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Tiles</span><span class="p">:</span> <span class="mi">1</span>                                                                   <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Slices</span><span class="p">:</span> <span class="mi">1</span>                                                                  <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Sub</span> <span class="n">Slices</span> <span class="n">per</span> <span class="n">Slice</span><span class="p">:</span> <span class="mi">32</span>                                                   <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Threads</span> <span class="n">per</span> <span class="n">EU</span><span class="p">:</span> <span class="mi">8</span>                                                          <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Physical</span> <span class="n">EU</span> <span class="n">SIMD</span> <span class="n">Width</span><span class="p">:</span> <span class="mi">8</span>                                                            <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Media</span> <span class="n">Engines</span><span class="p">:</span> <span class="mi">2</span>                                                           <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Media</span> <span class="n">Enhancement</span> <span class="n">Engines</span><span class="p">:</span> <span class="mi">2</span>                                               <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span>                                                                                      <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">ports</span><span class="p">:</span> <span class="mi">16</span>                                                          <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Max</span> <span class="n">Tx</span><span class="o">/</span><span class="n">Rx</span> <span class="n">Speed</span> <span class="n">per</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">port</span><span class="p">:</span> <span class="mf">51879.88</span> <span class="n">MiB</span><span class="o">/</span><span class="n">s</span>                                     <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Lanes</span> <span class="n">per</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">port</span><span class="p">:</span> <span class="mi">4</span>                                                  <span class="o">|</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>List the versions of all AMC which can be found on this server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">discovery</span> <span class="o">--</span><span class="n">listamcversions</span>
<span class="mi">1</span> <span class="n">AMC</span> <span class="n">are</span> <span class="n">found</span>
<span class="n">AMC</span> <span class="mi">1</span> <span class="n">firmware</span> <span class="n">version</span><span class="p">:</span> <span class="mf">4.0.0.0</span>
</pre></div>
</div>
</section>
<section id="manage-the-devices-in-groups">
<h2>Manage the devices in groups<a class="headerlink" href="#manage-the-devices-in-groups" title="Permalink to this headline"></a></h2>
<p>Help info of the group operation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">h</span>

<span class="n">Group</span> <span class="n">the</span> <span class="n">managed</span> <span class="n">GPU</span> <span class="n">devices</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">group</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">n</span> <span class="p">[</span><span class="n">groupName</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceIds</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceIds</span><span class="p">]</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">D</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">l</span>
  <span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span>


<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">c</span><span class="p">,</span><span class="o">--</span><span class="n">create</span>                 <span class="n">Create</span> <span class="n">a</span> <span class="n">group</span><span class="o">.</span>
  <span class="o">-</span><span class="n">D</span><span class="p">,</span><span class="o">--</span><span class="n">delete</span>                 <span class="n">Delete</span> <span class="n">a</span> <span class="n">group</span><span class="o">.</span>
  <span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">--</span><span class="nb">list</span>                   <span class="n">List</span> <span class="n">the</span> <span class="n">groups</span> <span class="n">info</span><span class="o">.</span>
  <span class="o">-</span><span class="n">a</span><span class="p">,</span><span class="o">--</span><span class="n">add</span>                    <span class="n">Add</span> <span class="n">devices</span> <span class="n">to</span> <span class="n">a</span> <span class="n">group</span><span class="o">.</span>
  <span class="o">-</span><span class="n">r</span><span class="p">,</span><span class="o">--</span><span class="n">remove</span>                 <span class="n">Remove</span> <span class="n">devices</span> <span class="kn">from</span> <span class="nn">group.</span>
  <span class="o">-</span><span class="n">g</span><span class="p">,</span><span class="o">--</span><span class="n">group</span>                  <span class="n">Group</span> <span class="n">ID</span><span class="o">.</span>
  <span class="o">-</span><span class="n">n</span><span class="p">,</span><span class="o">--</span><span class="n">name</span>                   <span class="n">Group</span> <span class="n">name</span><span class="o">.</span>
  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">Device</span> <span class="n">IDs</span><span class="o">.</span>
</pre></div>
</div>
<p>Create a group</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;testgroup&quot;</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Group</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Group</span> <span class="n">Properties</span>                                                                      <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span> <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">testgroup</span>                                                                 <span class="o">|</span>
<span class="o">|</span>          <span class="o">|</span> <span class="n">Device</span> <span class="n">IDs</span><span class="p">:</span> <span class="p">[]</span>                                                                        <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Add devices to a group</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">g</span> <span class="mi">1</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Group</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Group</span> <span class="n">Properties</span>                                                                      <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span> <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">testgroup</span>                                                                 <span class="o">|</span>
<span class="o">|</span>          <span class="o">|</span> <span class="n">Device</span> <span class="n">IDs</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>                                                                     <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>List a group info</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">l</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Group</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Group</span> <span class="n">Properties</span>                                                                      <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span> <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">testgroup</span>                                                                 <span class="o">|</span>
<span class="o">|</span>          <span class="o">|</span> <span class="n">Device</span> <span class="n">IDs</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>                                                                       <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Remove devices from a group</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">g</span> <span class="mi">1</span>
<span class="n">Successfully</span> <span class="n">remove</span> <span class="n">device</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="kn">from</span> <span class="nn">group</span> <span class="mi">1</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Group</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Group</span> <span class="n">Properties</span>                                                                      <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span> <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">testgroup</span>                                                                 <span class="o">|</span>
<span class="o">|</span>          <span class="o">|</span> <span class="n">Device</span> <span class="n">IDs</span><span class="p">:</span> <span class="p">[]</span>                                                                        <span class="o">|</span>
<span class="o">+----------+---------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Remove a group</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">group</span> <span class="o">-</span><span class="n">D</span> <span class="o">-</span><span class="n">g</span> <span class="mi">1</span>
<span class="n">Successfully</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">group</span>
</pre></div>
</div>
</section>
<section id="get-and-change-xpu-manager-settings">
<h2>Get and change XPU Manager settings<a class="headerlink" href="#get-and-change-xpu-manager-settings" title="Permalink to this headline"></a></h2>
<p>Help message of the “agentset” subcommand.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">agentset</span>
<span class="n">Get</span> <span class="ow">or</span> <span class="n">change</span> <span class="n">some</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="n">settings</span><span class="o">.</span> 

<span class="n">usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">agentset</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">agentset</span> <span class="o">-</span><span class="n">l</span>
  <span class="n">xpumcli</span> <span class="n">agentset</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">agentset</span> <span class="o">-</span><span class="n">t</span> <span class="mi">200</span>


<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">--</span><span class="nb">list</span>                   <span class="n">Display</span> <span class="nb">all</span> <span class="n">agent</span> <span class="n">settings</span>
  <span class="o">-</span><span class="n">t</span><span class="p">,</span><span class="o">--</span><span class="n">time</span>                   <span class="n">Set</span> <span class="n">the</span> <span class="n">time</span> <span class="n">interval</span> <span class="p">(</span><span class="ow">in</span> <span class="n">milliseconds</span><span class="p">)</span> <span class="n">by</span> <span class="n">which</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="n">daemon</span> <span class="n">retrieve</span> <span class="n">raw</span> <span class="n">gpu</span> <span class="n">statistics</span><span class="o">.</span> <span class="n">Valid</span> <span class="n">values</span> <span class="n">include</span> <span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mf">1000.</span>
</pre></div>
</div>
<p>List the XPU Manager settings</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">agentset</span> <span class="o">-</span><span class="n">l</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Name</span>                   <span class="o">|</span> <span class="n">Value</span>                                                                   <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Sampling</span> <span class="n">Interval</span> <span class="p">(</span><span class="n">ms</span><span class="p">)</span> <span class="o">|</span> <span class="mi">1000</span>                                                                    <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Change the XPU Manager sampling period</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">agentset</span> <span class="o">-</span><span class="n">t</span> <span class="mi">200</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Name</span>                   <span class="o">|</span> <span class="n">Value</span>                                                                   <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Sampling</span> <span class="n">Interval</span> <span class="p">(</span><span class="n">ms</span><span class="p">)</span> <span class="o">|</span> <span class="mi">200</span>                                                                     <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="get-the-aggregated-device-statistics">
<h2>Get the aggregated device statistics<a class="headerlink" href="#get-the-aggregated-device-statistics" title="Permalink to this headline"></a></h2>
<p>Help info for getting the GPU device aggregated statistics</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">stats</span> <span class="o">-</span><span class="n">h</span>

<span class="n">List</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">aggregated</span> <span class="n">statistics</span> <span class="n">since</span> <span class="n">last</span> <span class="n">execution</span> <span class="n">of</span> <span class="n">this</span> <span class="n">command</span> <span class="ow">or</span> <span class="n">XPU</span> <span class="n">Manager</span> <span class="n">daemon</span> <span class="ow">is</span> <span class="n">started</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">stats</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">stats</span>
  <span class="n">xpumcli</span> <span class="n">stats</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">stats</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="n">ID</span> <span class="n">to</span> <span class="n">query</span>
  <span class="o">-</span><span class="n">g</span><span class="p">,</span><span class="o">--</span><span class="n">group</span>                  <span class="n">The</span> <span class="n">group</span> <span class="n">ID</span> <span class="n">to</span> <span class="n">query</span>
  <span class="o">--</span><span class="n">xelink</span>                    <span class="n">Show</span> <span class="n">the</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">throughput</span> <span class="p">(</span><span class="n">GB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span> <span class="n">matrix</span>
  <span class="o">--</span><span class="n">utils</span>                     <span class="n">Show</span> <span class="n">the</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">throughput</span> <span class="n">utilization</span>
</pre></div>
</div>
<p>List the GPU device aggregated statistics that are collected by XPU Manager. ‘Media Engine Freq’ is inferred with ‘GPU Frequency’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">stats</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span>                  <span class="o">|</span> <span class="mi">0</span>                                                                   <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Start</span> <span class="n">Time</span>                 <span class="o">|</span> <span class="mi">2023</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">04</span><span class="n">T13</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mf">13.364</span>                                             <span class="o">|</span>
<span class="o">|</span> <span class="n">End</span> <span class="n">Time</span>                   <span class="o">|</span> <span class="mi">2023</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">04</span><span class="n">T13</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mf">13.982</span>                                             <span class="o">|</span>
<span class="o">|</span> <span class="n">Elapsed</span> <span class="n">Time</span> <span class="p">(</span><span class="n">Second</span><span class="p">)</span>      <span class="o">|</span> <span class="mi">120</span>                                                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Energy</span> <span class="n">Consumed</span> <span class="p">(</span><span class="n">J</span><span class="p">)</span>        <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mf">5245.05</span>                                                     <span class="o">|</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>        <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Compute</span> <span class="n">Engines</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>   <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Render</span> <span class="n">Engines</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>    <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Media</span> <span class="n">Engines</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>     <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Copy</span> <span class="n">Engines</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>      <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">EU</span> <span class="n">Array</span> <span class="n">Active</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>        <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span>                                                             <span class="o">|</span>
<span class="o">|</span> <span class="n">EU</span> <span class="n">Array</span> <span class="n">Stall</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>         <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span>                                                             <span class="o">|</span>
<span class="o">|</span> <span class="n">EU</span> <span class="n">Array</span> <span class="n">Idle</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>          <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span>                                                             <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Reset</span>                      <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">0</span>                                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Programming</span> <span class="n">Errors</span>         <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">0</span>                                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Driver</span> <span class="n">Errors</span>              <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">0</span>                                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Cache</span> <span class="n">Errors</span> <span class="n">Correctable</span>   <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">0</span>                                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Cache</span> <span class="n">Errors</span> <span class="n">Uncorrectable</span> <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">0</span>                                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Mem</span> <span class="n">Errors</span> <span class="n">Correctable</span>     <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">0</span>                                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Mem</span> <span class="n">Errors</span> <span class="n">Uncorrectable</span>   <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mi">0</span>                                                 <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Power</span> <span class="p">(</span><span class="n">W</span><span class="p">)</span>              <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">44</span>                      <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Frequency</span> <span class="p">(</span><span class="n">MHz</span><span class="p">)</span>        <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">2050</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">2050</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">2050</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">2050</span>              <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Media</span> <span class="n">Engine</span> <span class="n">Freq</span> <span class="p">(</span><span class="n">MHz</span><span class="p">)</span>    <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">1025</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">1025</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">1025</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">1025</span>              <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span>       <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">45</span>                      <span class="o">|</span>
<span class="o">|</span> <span class="p">(</span><span class="n">Celsius</span> <span class="n">Degree</span><span class="p">)</span>           <span class="o">|</span>                                                                     <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Temperature</span>     <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="p">,</span> <span class="n">current</span><span class="p">:</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="p">(</span><span class="n">Celsius</span> <span class="n">Degree</span><span class="p">)</span>           <span class="o">|</span>                                                                     <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Read</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>     <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">636</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">1384</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">1214</span>                  <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Write</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>    <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">88</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">47</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">216</span>                    <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Bandwidth</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>   <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">0</span>                          <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Used</span> <span class="p">(</span><span class="n">MiB</span><span class="p">)</span>      <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">26</span>                      <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>        <span class="o">|</span> <span class="n">Tile</span> <span class="mi">0</span><span class="p">:</span> <span class="n">avg</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="mi">0</span>                          <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCIe</span> <span class="n">Read</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>           <span class="o">|</span> <span class="n">avg</span><span class="p">:</span> <span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="p">,</span> <span class="n">current</span><span class="p">:</span>                                       <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCIe</span> <span class="n">Write</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>          <span class="o">|</span> <span class="n">avg</span><span class="p">:</span> <span class="p">,</span> <span class="nb">min</span><span class="p">:</span> <span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="p">,</span> <span class="n">current</span><span class="p">:</span>                                       <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Compute</span> <span class="n">Engine</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>    <span class="o">|</span> <span class="n">Engine</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Engine</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Engine</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Engine</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">0</span>                  <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Render</span> <span class="n">Engine</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>     <span class="o">|</span> <span class="n">Engine</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>                                                         <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Decoder</span> <span class="n">Engine</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>    <span class="o">|</span> <span class="n">Engine</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Engine</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">0</span>                                            <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Encoder</span> <span class="n">Engine</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>    <span class="o">|</span> <span class="n">Engine</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Engine</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">0</span>                                            <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Copy</span> <span class="n">Engine</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>       <span class="o">|</span> <span class="n">Engine</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span>                                                         <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Media</span> <span class="n">EM</span> <span class="n">Engine</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>   <span class="o">|</span> <span class="n">Engine</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Engine</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">0</span>                                            <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">3</span><span class="n">D</span> <span class="n">Engine</span> <span class="n">Util</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>         <span class="o">|</span>                                                                     <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">Throughput</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>  <span class="o">|</span>                                                                     <span class="o">|</span>
<span class="o">+----------------------------+---------------------------------------------------------------------+</span>

</pre></div>
</div>
</section>
<section id="get-the-device-health-status">
<h2>Get the device health status<a class="headerlink" href="#get-the-device-health-status" title="Permalink to this headline"></a></h2>
<p>Help info of get GPU device component health status</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">health</span>

<span class="n">Get</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">device</span> <span class="n">component</span> <span class="n">health</span> <span class="n">status</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">health</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">health</span> <span class="o">-</span><span class="n">l</span>
  <span class="n">xpumcli</span> <span class="n">health</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">c</span> <span class="p">[</span><span class="n">componentTypeId</span><span class="p">]</span> <span class="o">--</span><span class="n">threshold</span>  <span class="p">[</span><span class="n">threshold</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">health</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">c</span> <span class="p">[</span><span class="n">componentTypeId</span><span class="p">]</span> <span class="o">--</span><span class="n">threshold</span> <span class="p">[</span><span class="n">threshold</span><span class="p">]</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">health</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">-</span><span class="n">c</span> <span class="p">[</span><span class="n">componentTypeId</span><span class="p">]</span> <span class="o">--</span><span class="n">threshold</span> <span class="p">[</span><span class="n">threshold</span><span class="p">]</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">--</span><span class="nb">list</span>                   <span class="n">Display</span> <span class="n">health</span> <span class="n">info</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">devices</span>
  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="n">ID</span>
  <span class="o">-</span><span class="n">g</span><span class="p">,</span><span class="o">--</span><span class="n">group</span>                  <span class="n">The</span> <span class="n">group</span> <span class="n">ID</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span><span class="o">--</span><span class="n">component</span>              <span class="n">Component</span> <span class="n">types</span>
                                <span class="mf">1.</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span>
                                <span class="mf">2.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Temperature</span>
                                <span class="mf">3.</span> <span class="n">GPU</span> <span class="n">Power</span>
                                <span class="mf">4.</span> <span class="n">GPU</span> <span class="n">Memory</span>
                                <span class="mf">5.</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">Port</span>
  <span class="o">--</span><span class="n">threshold</span>                 <span class="n">Set</span> <span class="n">custom</span> <span class="n">threshold</span> <span class="k">for</span> <span class="n">device</span> <span class="n">component</span>
</pre></div>
</div>
<p>Get the GPU device component health status. There are some build-in thresholds for the GPU telemetries. You may also set your custom threshold to help monitor the GPU component health status.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">health</span> <span class="o">-</span><span class="n">l</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span>                    <span class="o">|</span> <span class="mi">0</span>                                                                 <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mf">1.</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span>      <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Ok</span>                                                        <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Description</span><span class="p">:</span> <span class="n">All</span> <span class="n">temperature</span> <span class="n">sensors</span> <span class="n">are</span> <span class="n">healthy</span><span class="o">.</span>                 <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Throttle</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">105</span> <span class="n">Celsius</span> <span class="n">Degree</span>                            <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Shutdown</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">130</span> <span class="n">Celsius</span> <span class="n">Degree</span>                            <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Custom</span> <span class="n">Threshold</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>                                              <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mf">2.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Temperature</span>    <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Ok</span>                                                        <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Description</span><span class="p">:</span> <span class="n">All</span> <span class="n">temperature</span> <span class="n">sensors</span> <span class="n">are</span> <span class="n">healthy</span><span class="o">.</span>                 <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Throttle</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">85</span>  <span class="n">Celsius</span> <span class="n">Degree</span>                            <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Shutdown</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">100</span> <span class="n">Celsius</span> <span class="n">Degree</span>                            <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Custom</span> <span class="n">Threshold</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>                                              <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mf">3.</span> <span class="n">GPU</span> <span class="n">Power</span>                 <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Ok</span>                                                        <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Description</span><span class="p">:</span> <span class="n">All</span> <span class="n">power</span> <span class="n">domains</span> <span class="n">are</span> <span class="n">healthy</span><span class="o">.</span>                       <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Throttle</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">150</span> <span class="n">watts</span>                                     <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Custom</span> <span class="n">Threshold</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>                                              <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mf">4.</span> <span class="n">GPU</span> <span class="n">Memory</span>                <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Ok</span>                                                        <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Description</span><span class="p">:</span> <span class="n">All</span> <span class="n">memory</span> <span class="n">channels</span> <span class="n">are</span> <span class="n">healthy</span><span class="o">.</span>                     <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mf">5.</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">Port</span>              <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Ok</span>                                                        <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Description</span><span class="p">:</span> <span class="n">All</span> <span class="n">ports</span> <span class="n">are</span> <span class="n">healthy</span><span class="o">.</span>                               <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Change the component custom temperature threshold</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">health</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">c</span> <span class="mi">1</span> <span class="o">--</span><span class="n">threshold</span> <span class="mi">90</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span>                    <span class="o">|</span> <span class="mi">0</span>                                                                 <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mf">1.</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span>      <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Ok</span>                                                        <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Description</span><span class="p">:</span> <span class="n">All</span> <span class="n">temperature</span> <span class="n">sensors</span> <span class="n">are</span> <span class="n">healthy</span><span class="o">.</span>                 <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Throttle</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">105</span> <span class="n">Celsius</span> <span class="n">Degree</span>                            <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Shutdown</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">130</span> <span class="n">Celsius</span> <span class="n">Degree</span>                            <span class="o">|</span>
<span class="o">|</span>                              <span class="o">|</span> <span class="n">Custom</span> <span class="n">Threshold</span><span class="p">:</span> <span class="mi">90</span> <span class="n">Celsius</span> <span class="n">Degree</span>                               <span class="o">|</span>
<span class="o">+------------------------------+-------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="dump-the-device-statistics-in-csv-format">
<h2>Dump the device statistics in CSV format<a class="headerlink" href="#dump-the-device-statistics-in-csv-format" title="Permalink to this headline"></a></h2>
<section id="the-statistics-supported-by-intel-data-center-gpus">
<h3>The Statistics supported by Intel data center GPUs<a class="headerlink" href="#the-statistics-supported-by-intel-data-center-gpus" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Intel(R) Data Center Flex Series GPU</p>
<ul>
<li><p>GPU and GPU engine utilizations</p></li>
<li><p>GPU energy and power</p></li>
<li><p>GPU core temperature</p></li>
<li><p>GPU frequency</p></li>
<li><p>GPU memory usage</p></li>
<li><p>GPU memory throughput</p></li>
<li><p>GPU EU utilization</p></li>
<li><p>GPU PCIe throughput</p></li>
<li><p>GPU throttle reason</p></li>
</ul>
</li>
<li><p>Intel(R) Data Center Max Series GPU</p>
<ul>
<li><p>GPU and GPU engine utilizations</p></li>
<li><p>GPU energy and power</p></li>
<li><p>GPU core and GPU memory temperature</p></li>
<li><p>GPU frequency</p></li>
<li><p>GPU memory usage</p></li>
<li><p>GPU memory throughput</p></li>
<li><p>GPU PCIe throughput</p></li>
<li><p>Xe Link throughput</p></li>
<li><p>GPU throttle reason</p></li>
<li><p>GPU reset count and GPU memory error number</p></li>
</ul>
</li>
</ul>
<p>Help info of the device statistics dump. Please note that the metrics ‘GPU Energy Consumed’, ‘Reset Counter’, ‘Programming Errors’, ‘Driver Errors’, ‘Cache Errors Correctable’ and ‘Cache Errors Uncorrectable’ are not implemented in dump sub-command so far. Please do not dump these metrics. ‘Media Engine Frequency’ is inferred with ‘GPU Frequency’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">dump</span>

<span class="n">Dump</span> <span class="n">device</span> <span class="n">statistics</span> <span class="n">data</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">dump</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceIds</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">deviceTileIds</span><span class="p">]</span> <span class="o">-</span><span class="n">m</span> <span class="p">[</span><span class="n">metricsIds</span><span class="p">]</span> <span class="o">-</span><span class="n">i</span> <span class="p">[</span><span class="n">timeInterval</span><span class="p">]</span> <span class="o">-</span><span class="n">n</span> <span class="p">[</span><span class="n">dumpTimes</span><span class="p">]</span>
  
  <span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">--</span><span class="n">rawdata</span> <span class="o">--</span><span class="n">start</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">deviceTileId</span><span class="p">]</span> <span class="o">-</span><span class="n">m</span> <span class="p">[</span><span class="n">metricsIds</span><span class="p">]</span> 
  <span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">--</span><span class="n">rawdata</span> <span class="o">--</span><span class="nb">list</span>
  <span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">--</span><span class="n">rawdata</span> <span class="o">--</span><span class="n">stop</span> <span class="p">[</span><span class="n">taskId</span><span class="p">]</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="nb">id</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">to</span> <span class="n">query</span>
  <span class="o">-</span><span class="n">t</span><span class="p">,</span><span class="o">--</span><span class="n">tile</span>                   <span class="n">The</span> <span class="n">device</span> <span class="n">tile</span> <span class="n">ID</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">to</span> <span class="n">query</span><span class="o">.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">device</span> <span class="n">has</span> <span class="n">only</span> <span class="n">one</span> <span class="n">tile</span><span class="p">,</span> <span class="n">this</span> <span class="n">parameter</span> <span class="n">should</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">specified</span><span class="o">.</span> 
  <span class="o">-</span><span class="n">m</span><span class="p">,</span><span class="o">--</span><span class="n">metrics</span>                <span class="n">Metrics</span> <span class="nb">type</span> <span class="n">to</span> <span class="n">collect</span> <span class="n">raw</span> <span class="n">data</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span> <span class="n">Separated</span> <span class="n">by</span> <span class="n">the</span> <span class="n">comma</span><span class="o">.</span>
                                <span class="mf">0.</span> <span class="n">GPU</span> <span class="n">Utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">GPU</span> <span class="n">active</span> <span class="n">time</span> <span class="n">of</span> <span class="n">the</span> <span class="n">elapsed</span> <span class="n">time</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">1.</span> <span class="n">GPU</span> <span class="n">Power</span> <span class="p">(</span><span class="n">W</span><span class="p">),</span> <span class="n">per</span> <span class="n">GPU</span> <span class="ow">and</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">2.</span> <span class="n">GPU</span> <span class="n">Frequency</span> <span class="p">(</span><span class="n">MHz</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">3.</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span> <span class="p">(</span><span class="n">Celsius</span> <span class="n">Degree</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">4.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Temperature</span> <span class="p">(</span><span class="n">Celsius</span> <span class="n">Degree</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">5.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">6.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Read</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">7.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Write</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">8.</span> <span class="n">GPU</span> <span class="n">Energy</span> <span class="n">Consumed</span> <span class="p">(</span><span class="n">J</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">9.</span> <span class="n">GPU</span> <span class="n">EU</span> <span class="n">Array</span> <span class="n">Active</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">the</span> <span class="n">normalized</span> <span class="nb">sum</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">cycles</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">EUs</span> <span class="n">that</span> <span class="n">were</span> <span class="n">spent</span> <span class="n">actively</span> <span class="n">executing</span> <span class="n">instructions</span><span class="o">.</span> <span class="n">Per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">10.</span> <span class="n">GPU</span> <span class="n">EU</span> <span class="n">Array</span> <span class="n">Stall</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">the</span> <span class="n">normalized</span> <span class="nb">sum</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">cycles</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">EUs</span> <span class="n">during</span> <span class="n">which</span> <span class="n">the</span> <span class="n">EUs</span> <span class="n">were</span> <span class="n">stalled</span><span class="o">.</span> <span class="n">Per</span> <span class="n">tile</span><span class="o">.</span> <span class="n">At</span> <span class="n">least</span> <span class="n">one</span> <span class="n">thread</span> <span class="ow">is</span> <span class="n">loaded</span><span class="p">,</span> <span class="n">but</span> <span class="n">the</span> <span class="n">EU</span> <span class="ow">is</span> <span class="n">stalled</span><span class="o">.</span> <span class="n">Per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">11.</span> <span class="n">GPU</span> <span class="n">EU</span> <span class="n">Array</span> <span class="n">Idle</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">the</span> <span class="n">normalized</span> <span class="nb">sum</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">cycles</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">cores</span> <span class="n">when</span> <span class="n">no</span> <span class="n">threads</span> <span class="n">were</span> <span class="n">scheduled</span> <span class="n">on</span> <span class="n">a</span> <span class="n">core</span><span class="o">.</span> <span class="n">Per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">12.</span> <span class="n">Reset</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">13.</span> <span class="n">Programming</span> <span class="n">Errors</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">14.</span> <span class="n">Driver</span> <span class="n">Errors</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">15.</span> <span class="n">Cache</span> <span class="n">Errors</span> <span class="n">Correctable</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">16.</span> <span class="n">Cache</span> <span class="n">Errors</span> <span class="n">Uncorrectable</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span> 
                                <span class="mf">17.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Bandwidth</span> <span class="n">Utilization</span><span class="o">.</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>
                                <span class="mf">18.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Used</span> <span class="p">(</span><span class="n">MiB</span><span class="p">)</span>
                                <span class="mf">19.</span> <span class="n">PCIe</span> <span class="n">Read</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">per</span> <span class="n">GPU</span>
                                <span class="mf">20.</span> <span class="n">PCIe</span> <span class="n">Write</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">per</span> <span class="n">GPU</span>
                                <span class="mf">21.</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">Throughput</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">tile</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">tile</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">throughput</span><span class="o">.</span> 
                                <span class="mf">22.</span> <span class="n">Compute</span> <span class="n">engine</span> <span class="n">utilizations</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">23.</span> <span class="n">Render</span> <span class="n">engine</span> <span class="n">utilizations</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">24.</span> <span class="n">Media</span> <span class="n">decoder</span> <span class="n">engine</span> <span class="n">utilizations</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">25.</span> <span class="n">Media</span> <span class="n">encoder</span> <span class="n">engine</span> <span class="n">utilizations</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">26.</span> <span class="n">Copy</span> <span class="n">engine</span> <span class="n">utilizations</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">27.</span> <span class="n">Media</span> <span class="n">enhancement</span> <span class="n">engine</span> <span class="n">utilizations</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">28.</span> <span class="mi">3</span><span class="n">D</span> <span class="n">engine</span> <span class="n">utilizations</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span>
                                <span class="mf">29.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Errors</span> <span class="n">Correctable</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span> <span class="n">Other</span> <span class="n">non</span><span class="o">-</span><span class="n">compute</span> <span class="n">correctable</span> <span class="n">errors</span> <span class="n">are</span> <span class="n">also</span> <span class="n">included</span><span class="o">.</span> 
                                <span class="mf">30.</span> <span class="n">GPU</span> <span class="n">Memory</span> <span class="n">Errors</span> <span class="n">Uncorrectable</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span><span class="o">.</span> <span class="n">Other</span> <span class="n">non</span><span class="o">-</span><span class="n">compute</span> <span class="n">uncorrectable</span> <span class="n">errors</span> <span class="n">are</span> <span class="n">also</span> <span class="n">included</span><span class="o">.</span> 
                                <span class="mf">31.</span> <span class="n">Compute</span> <span class="n">engine</span> <span class="n">group</span> <span class="n">utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">32.</span> <span class="n">Render</span> <span class="n">engine</span> <span class="n">group</span> <span class="n">utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">33.</span> <span class="n">Media</span> <span class="n">engine</span> <span class="n">group</span> <span class="n">utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">34.</span> <span class="n">Copy</span> <span class="n">engine</span> <span class="n">group</span> <span class="n">utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">35.</span> <span class="n">Throttle</span> <span class="n">reason</span><span class="p">,</span> <span class="n">per</span> <span class="n">tile</span>
                                <span class="mf">36.</span> <span class="n">Media</span> <span class="n">Engine</span> <span class="n">Frequency</span> <span class="p">(</span><span class="n">MHz</span><span class="p">),</span> <span class="n">per</span> <span class="n">tile</span>

  
  <span class="o">-</span><span class="n">i</span>                          <span class="n">The</span> <span class="n">interval</span> <span class="p">(</span><span class="ow">in</span> <span class="n">seconds</span><span class="p">)</span> <span class="n">to</span> <span class="n">dump</span> <span class="n">the</span> <span class="n">device</span> <span class="n">statistics</span> <span class="n">to</span> <span class="n">screen</span><span class="o">.</span> <span class="n">Default</span> <span class="n">value</span><span class="p">:</span> <span class="mi">1</span> <span class="n">second</span><span class="o">.</span> 
  <span class="o">-</span><span class="n">n</span>                          <span class="n">Number</span> <span class="n">of</span> <span class="n">the</span> <span class="n">device</span> <span class="n">statistics</span> <span class="n">dump</span> <span class="n">to</span> <span class="n">screen</span><span class="o">.</span> <span class="n">The</span> <span class="n">dump</span> <span class="n">will</span> <span class="n">never</span> <span class="n">be</span> <span class="n">ended</span> <span class="k">if</span> <span class="n">this</span> <span class="n">parameter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">specified</span><span class="o">.</span> 
  
  <span class="o">--</span><span class="n">rawdata</span>                   <span class="n">Dump</span> <span class="n">the</span> <span class="n">required</span> <span class="n">raw</span> <span class="n">statistics</span> <span class="n">to</span> <span class="n">a</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">background</span><span class="o">.</span> 
  <span class="o">--</span><span class="n">start</span>                     <span class="n">Start</span> <span class="n">a</span> <span class="n">new</span> <span class="n">background</span> <span class="n">task</span> <span class="n">to</span> <span class="n">dump</span> <span class="n">the</span> <span class="n">raw</span> <span class="n">statistics</span> <span class="n">to</span> <span class="n">a</span> <span class="n">file</span><span class="o">.</span> <span class="n">The</span> <span class="n">task</span> <span class="n">ID</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">file</span> <span class="n">path</span> <span class="n">are</span> <span class="n">returned</span><span class="o">.</span>
  <span class="o">--</span><span class="n">stop</span>                      <span class="n">Stop</span> <span class="n">one</span> <span class="n">active</span> <span class="n">dump</span> <span class="n">task</span><span class="o">.</span>
  <span class="o">--</span><span class="nb">list</span>                      <span class="n">List</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">active</span> <span class="n">dump</span> <span class="n">tasks</span><span class="o">.</span> 
</pre></div>
</div>
<p>Dump the device statistics to screen in CSV format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">-</span><span class="n">m</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">22</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1</span> <span class="o">-</span><span class="n">n</span> <span class="mi">5</span>
<span class="n">Timestamp</span><span class="p">,</span><span class="n">DeviceId</span><span class="p">,</span><span class="n">TileId</span><span class="p">,</span><span class="n">GPU</span> <span class="n">Utilization</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span><span class="n">GPU</span> <span class="n">Power</span> <span class="p">(</span><span class="n">W</span><span class="p">),</span><span class="n">GPU</span> <span class="n">Frequency</span> <span class="p">(</span><span class="n">MHz</span><span class="p">),</span><span class="n">XL</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">-&gt;</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span><span class="n">XL</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">-&gt;</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span> <span class="p">(</span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span><span class="n">Compute</span> <span class="n">Engine</span> <span class="mi">0</span> <span class="p">(</span><span class="o">%</span><span class="p">),</span> <span class="n">Compute</span> <span class="n">Engine</span> <span class="mi">1</span> <span class="p">(</span><span class="o">%</span><span class="p">)</span>
<span class="mi">13</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mf">43.100</span><span class="p">,</span> <span class="mi">00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">000</span><span class="p">,</span>    <span class="p">,</span> <span class="mi">0300</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>
<span class="mi">13</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mf">44.100</span><span class="p">,</span> <span class="mi">00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">000</span><span class="p">,</span>    <span class="p">,</span> <span class="mi">0300</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>
<span class="mi">13</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mf">45.100</span><span class="p">,</span> <span class="mi">00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">046</span><span class="p">,</span>    <span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>
<span class="mi">13</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mf">46.100</span><span class="p">,</span> <span class="mi">00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">000</span><span class="p">,</span>    <span class="p">,</span> <span class="mi">0300</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>
<span class="mi">13</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mf">47.100</span><span class="p">,</span> <span class="mi">00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">000</span><span class="p">,</span>    <span class="p">,</span> <span class="mi">0300</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Start to dump the device raw statistics to the CSV file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">--</span><span class="n">rawdata</span> <span class="o">--</span><span class="n">start</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">-</span><span class="n">m</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span> 
<span class="n">Task</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">started</span><span class="o">.</span>
<span class="n">Dump</span> <span class="n">file</span> <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">xpum</span><span class="o">/</span><span class="n">dump</span><span class="o">/</span><span class="n">dump</span><span class="o">-</span><span class="n">output</span><span class="o">-</span><span class="n">e4439267203fb5277d347e6cd6e440b5</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<p>List all the active dump tasks.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">--</span><span class="n">rawdata</span> <span class="o">--</span><span class="nb">list</span>
<span class="n">Task</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">running</span><span class="o">.</span> 
<span class="n">Task</span> <span class="mi">1</span> <span class="ow">is</span> <span class="n">running</span><span class="o">.</span>
</pre></div>
</div>
<p>Stop the dump task.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">dump</span> <span class="o">--</span><span class="n">rawdata</span> <span class="o">--</span><span class="n">stop</span> <span class="mi">0</span>
<span class="n">Task</span> <span class="mi">0</span> <span class="ow">is</span> <span class="n">stopped</span><span class="o">.</span> 
<span class="n">Dump</span> <span class="n">file</span> <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">xpum</span><span class="o">/</span><span class="n">dump</span><span class="o">/</span><span class="n">dump</span><span class="o">-</span><span class="n">output</span><span class="o">-</span><span class="n">e4439267203fb5277d347e6cd6e440b5</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</section>
</section>
<section id="get-the-system-topology">
<h2>Get the system topology<a class="headerlink" href="#get-the-system-topology" title="Permalink to this headline"></a></h2>
<p>Help info of get the system topology</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">topology</span>

<span class="n">Get</span> <span class="n">the</span> <span class="n">system</span> <span class="n">topology</span> <span class="n">info</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">topology</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">topology</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">topology</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">topology</span> <span class="o">-</span><span class="n">f</span> <span class="p">[</span><span class="n">filename</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">topology</span> <span class="o">-</span><span class="n">m</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="n">ID</span> <span class="n">to</span> <span class="n">query</span>
  <span class="o">-</span><span class="n">f</span><span class="p">,</span><span class="o">--</span><span class="n">file</span>                   <span class="n">Generate</span> <span class="n">the</span> <span class="n">system</span> <span class="n">topology</span> <span class="k">with</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">info</span> <span class="n">to</span> <span class="n">a</span> <span class="n">XML</span> <span class="n">file</span><span class="o">.</span> 
  <span class="o">-</span><span class="n">m</span><span class="p">,</span><span class="o">--</span><span class="n">matrix</span>                 <span class="n">Print</span> <span class="n">the</span> <span class="n">CPU</span><span class="o">/</span><span class="n">GPU</span> <span class="n">topology</span> <span class="n">matrix</span><span class="o">.</span> 
                                <span class="n">S</span><span class="p">:</span> <span class="n">Self</span>
                                <span class="n">XL</span><span class="p">[</span><span class="n">laneCount</span><span class="p">]:</span> <span class="n">Two</span> <span class="n">tiles</span> <span class="n">on</span> <span class="n">the</span> <span class="n">different</span> <span class="n">cards</span> <span class="n">are</span> <span class="n">directly</span> <span class="n">connected</span> <span class="n">by</span> <span class="n">Xe</span> <span class="n">Link</span><span class="o">.</span>  <span class="n">Xe</span> <span class="n">Link</span> <span class="n">lane</span> <span class="n">count</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">provided</span><span class="o">.</span>
                                <span class="n">XL</span><span class="o">*</span><span class="p">:</span> <span class="n">Two</span> <span class="n">tiles</span> <span class="n">on</span> <span class="n">the</span> <span class="n">different</span> <span class="n">cards</span> <span class="n">are</span> <span class="n">connected</span> <span class="n">by</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="o">+</span> <span class="n">MDF</span><span class="o">.</span> <span class="n">They</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">directly</span> <span class="n">connected</span> <span class="n">by</span> <span class="n">Xe</span> <span class="n">Link</span><span class="o">.</span> 
                                <span class="n">SYS</span><span class="p">:</span> <span class="n">Connected</span> <span class="k">with</span> <span class="n">PCIe</span> <span class="n">between</span> <span class="n">NUMA</span> <span class="n">nodes</span>
                                <span class="n">NODE</span><span class="p">:</span> <span class="n">Connected</span> <span class="k">with</span> <span class="n">PCIe</span> <span class="n">within</span> <span class="n">a</span> <span class="n">NUMA</span> <span class="n">node</span>
                                <span class="n">MDF</span><span class="p">:</span> <span class="n">Connected</span> <span class="k">with</span> <span class="n">Multi</span><span class="o">-</span><span class="n">Die</span> <span class="n">Fabric</span> <span class="n">Interface</span>
</pre></div>
</div>
<p>Get the hardware topology info which is related to the GPU</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">topology</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Topology</span> <span class="n">Information</span>                                                                 <span class="o">|</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="mi">0</span>         <span class="o">|</span> <span class="n">Local</span> <span class="n">CPU</span> <span class="n">List</span><span class="p">:</span> <span class="mi">0</span><span class="o">-</span><span class="mi">23</span><span class="p">,</span><span class="mi">48</span><span class="o">-</span><span class="mi">71</span>                                                           <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">Local</span> <span class="n">CPUs</span><span class="p">:</span> <span class="mi">000000</span><span class="n">ff</span><span class="p">,</span><span class="n">ffff0000</span><span class="p">,</span><span class="mi">00</span><span class="n">ffffff</span>                                               <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">PCIe</span> <span class="n">Switch</span> <span class="n">Count</span><span class="p">:</span> <span class="mi">1</span>                                                                 <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span> <span class="n">PCIe</span> <span class="n">Switch</span><span class="p">:</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">pci0000</span><span class="p">:</span><span class="mi">4</span><span class="n">a</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">a</span><span class="p">:</span><span class="mf">02.0</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">b</span><span class="p">:</span><span class="mf">00.0</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">c</span><span class="p">:</span><span class="mf">00.0</span>          <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span>   <span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.0</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="mf">18.0</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mf">00.0</span><span class="o">/</span><span class="mi">0000</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">01</span>                                 <span class="o">|</span>
<span class="o">+-----------+--------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Generate the system hardware topology to a XML file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">topology</span> <span class="o">-</span><span class="n">f</span> <span class="n">topo</span><span class="o">.</span><span class="n">xml</span>
<span class="n">The</span> <span class="n">system</span> <span class="n">topology</span> <span class="ow">is</span> <span class="n">generated</span> <span class="n">to</span> <span class="n">the</span> <span class="n">file</span> <span class="n">topo</span><span class="o">.</span><span class="n">xml</span><span class="o">.</span> 
</pre></div>
</div>
<p>Generate the CPU/GPU topology matrix.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">topology</span> <span class="o">-</span><span class="n">m</span>

         <span class="n">GPU</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">|</span><span class="n">GPU</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">|</span><span class="n">GPU</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">|</span><span class="n">GPU</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">|</span><span class="n">CPU</span> <span class="n">Affinity</span>
<span class="n">GPU</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span> <span class="o">|</span><span class="n">S</span>      <span class="o">|</span><span class="n">MDF</span>    <span class="o">|</span><span class="n">XL</span><span class="o">*</span>    <span class="o">|</span><span class="n">XL16</span>   <span class="o">|</span><span class="mi">0</span><span class="o">-</span><span class="mi">23</span><span class="p">,</span><span class="mi">48</span><span class="o">-</span><span class="mi">71</span>
<span class="n">GPU</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span> <span class="o">|</span><span class="n">MDF</span>    <span class="o">|</span><span class="n">S</span>      <span class="o">|</span><span class="n">XL16</span>   <span class="o">|</span><span class="n">XL</span><span class="o">*</span>    <span class="o">|</span><span class="mi">0</span><span class="o">-</span><span class="mi">23</span><span class="p">,</span><span class="mi">48</span><span class="o">-</span><span class="mi">71</span>
<span class="n">GPU</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span> <span class="o">|</span><span class="n">XL</span><span class="o">*</span>    <span class="o">|</span><span class="n">XL16</span>   <span class="o">|</span><span class="n">S</span>      <span class="o">|</span><span class="n">MDF</span>    <span class="o">|</span><span class="mi">24</span><span class="o">-</span><span class="mi">47</span><span class="p">,</span><span class="mi">72</span><span class="o">-</span><span class="mi">95</span>
<span class="n">GPU</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span> <span class="o">|</span><span class="n">XL16</span>   <span class="o">|</span><span class="n">XL</span><span class="o">*</span>    <span class="o">|</span><span class="n">MDF</span>    <span class="o">|</span><span class="n">S</span>      <span class="o">|</span><span class="mi">24</span><span class="o">-</span><span class="mi">47</span><span class="p">,</span><span class="mi">72</span><span class="o">-</span><span class="mi">95</span>
</pre></div>
</div>
</section>
<section id="update-the-gpu-firmware">
<h2>Update the GPU firmware<a class="headerlink" href="#update-the-gpu-firmware" title="Permalink to this headline"></a></h2>
<p>Help info of updating GPU firmware</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">updatefw</span>

<span class="n">Update</span> <span class="n">GPU</span> <span class="n">firmware</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">updatefw</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">updatefw</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="n">GFX</span> <span class="o">-</span><span class="n">f</span> <span class="p">[</span><span class="n">imageFilePath</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">updatefw</span> <span class="o">-</span><span class="n">t</span> <span class="n">AMC</span> <span class="o">-</span><span class="n">f</span> <span class="p">[</span><span class="n">imageFilePath</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="n">ID</span>
  <span class="o">-</span><span class="n">t</span><span class="p">,</span><span class="o">--</span><span class="nb">type</span>                   <span class="n">The</span> <span class="n">firmware</span> <span class="n">name</span><span class="o">.</span> <span class="n">Valid</span> <span class="n">options</span><span class="p">:</span> <span class="n">GFX</span><span class="p">,</span> <span class="n">GFX_DATA</span><span class="p">,</span> <span class="n">AMC</span><span class="o">.</span> <span class="n">AMC</span> <span class="n">firmware</span> <span class="n">update</span> <span class="n">just</span> <span class="n">works</span> <span class="n">on</span> <span class="n">Intel</span> <span class="n">M50CYP</span> <span class="n">server</span> <span class="p">(</span><span class="n">BMC</span> <span class="n">firmware</span> <span class="n">version</span> <span class="ow">is</span> <span class="mf">2.82</span> <span class="ow">or</span> <span class="n">newer</span><span class="p">)</span> <span class="ow">and</span> <span class="n">Supermicro</span> <span class="n">SYS</span><span class="o">-</span><span class="mi">620</span><span class="n">C</span><span class="o">-</span><span class="n">TN12R</span> <span class="n">server</span> <span class="p">(</span><span class="n">BMC</span> <span class="n">firmware</span> <span class="n">version</span> <span class="ow">is</span> <span class="mf">11.01</span> <span class="ow">or</span> <span class="n">newer</span><span class="p">)</span><span class="o">.</span>
  <span class="o">-</span><span class="n">f</span><span class="p">,</span><span class="o">--</span><span class="n">file</span>                   <span class="n">The</span> <span class="n">firmware</span> <span class="n">image</span> <span class="n">file</span> <span class="n">path</span> <span class="n">on</span> <span class="n">this</span> <span class="n">server</span><span class="o">.</span>
  <span class="o">-</span><span class="n">u</span><span class="p">,</span><span class="o">--</span><span class="n">username</span>               <span class="n">Username</span> <span class="n">used</span> <span class="n">to</span> <span class="n">update</span> <span class="n">AMC</span> <span class="n">firmware</span> <span class="n">through</span> <span class="n">Redfish</span> <span class="n">Host</span> <span class="n">interface</span>
  <span class="o">-</span><span class="n">p</span><span class="p">,</span><span class="o">--</span><span class="n">password</span>               <span class="n">Password</span> <span class="n">used</span> <span class="n">to</span> <span class="n">update</span> <span class="n">AMC</span> <span class="n">firmware</span> <span class="n">through</span> <span class="n">Redfish</span> <span class="n">Host</span> <span class="n">interface</span>
  <span class="o">-</span><span class="n">y</span><span class="p">,</span><span class="o">--</span><span class="n">assumeyes</span>              <span class="n">Assume</span> <span class="n">that</span> <span class="n">the</span> <span class="n">answer</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">question</span> <span class="n">which</span> <span class="n">would</span> <span class="n">be</span> <span class="n">asked</span> <span class="ow">is</span> <span class="n">yes</span>
</pre></div>
</div>
<p>Update GPU GFX firmware</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./xpumcli updatefw -d 0 -t GFX -f /home/test/tools/ATS_M3.bin
This GPU card has multiple cores. This operation will update all firmware. Do you want to continue? (y/n) y
Start to update firmware:
Firmware name: GFX
Image path: /home/test/tools/ATS_M3.bin
Update firmware successfully. Please reboot OS to take effect. 
</pre></div>
</div>
<p>Update GPU AMC firmware</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./xpumcli updatefw -t AMC -f /home/dcm/ats_m_amc_v_3_6_3_0.bin
CAUTION: it will update the AMC firmware of all cards and please make sure that you install the GPUs of the same model. Updating AMC firmware may cause OS to reboot.
Please confirm to proceed ( Y/N ) ?
Y
Start to update firmware
Firmware Name: AMC
Image path: /home/dcm/ats_m_amc_v_3_6_3_0.bin
..............Update firmware successfully. Please reboot OS to take effect. 

</pre></div>
</div>
</section>
<section id="get-and-change-the-gpu-settings">
<h2>Get and change the GPU settings<a class="headerlink" href="#get-and-change-the-gpu-settings" title="Permalink to this headline"></a></h2>
<p>Help info of getting/changing the GPU settings</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span>

<span class="n">Get</span> <span class="ow">and</span> <span class="n">change</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">settings</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">config</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">tileId</span><span class="p">]</span> <span class="o">--</span><span class="n">frequencyrange</span> <span class="p">[</span><span class="n">minFrequency</span><span class="p">,</span><span class="n">maxFrequency</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">--</span><span class="n">powerlimit</span> <span class="p">[</span><span class="n">powerValue</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">--</span><span class="n">memoryecc</span> <span class="p">[</span><span class="mi">0</span><span class="o">|</span><span class="mi">1</span><span class="p">]</span> <span class="mi">0</span><span class="p">:</span><span class="n">disable</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span><span class="n">enable</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">tileId</span><span class="p">]</span> <span class="o">--</span><span class="n">standby</span> <span class="p">[</span><span class="n">standbyMode</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">tileId</span><span class="p">]</span> <span class="o">--</span><span class="n">scheduler</span> <span class="p">[</span><span class="n">schedulerMode</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">tileId</span><span class="p">]</span> <span class="o">--</span><span class="n">performancefactor</span> <span class="p">[</span><span class="n">engineType</span><span class="p">,</span><span class="n">factorValue</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">tileId</span><span class="p">]</span> <span class="o">--</span><span class="n">xelinkport</span> <span class="p">[</span><span class="n">portId</span><span class="p">,</span><span class="n">value</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">t</span> <span class="p">[</span><span class="n">tileId</span><span class="p">]</span> <span class="o">--</span><span class="n">xelinkportbeaconing</span> <span class="p">[</span><span class="n">portId</span><span class="p">,</span><span class="n">value</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">--</span><span class="n">reset</span>
  
  
<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="n">ID</span>
  <span class="o">-</span><span class="n">t</span><span class="p">,</span><span class="o">--</span><span class="n">tile</span>                   <span class="n">The</span> <span class="n">tile</span> <span class="n">ID</span>

  <span class="o">--</span><span class="n">frequencyrange</span>            <span class="n">GPU</span> <span class="n">tile</span><span class="o">-</span><span class="n">level</span> <span class="n">core</span> <span class="n">frequency</span> <span class="nb">range</span><span class="o">.</span>
  <span class="o">--</span><span class="n">powerlimit</span>                <span class="n">GPU</span><span class="o">-</span><span class="n">level</span> <span class="n">power</span> <span class="n">limit</span><span class="o">.</span> 
  <span class="o">--</span><span class="n">standby</span>                   <span class="n">Tile</span><span class="o">-</span><span class="n">level</span> <span class="n">standby</span> <span class="n">mode</span><span class="o">.</span> <span class="n">Valid</span> <span class="n">options</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">;</span> <span class="s2">&quot;never&quot;</span><span class="o">.</span>
  <span class="o">--</span><span class="n">scheduler</span>                 <span class="n">Tile</span><span class="o">-</span><span class="n">level</span> <span class="n">scheduler</span> <span class="n">mode</span><span class="o">.</span> <span class="n">Value</span> <span class="n">options</span><span class="p">:</span> <span class="s2">&quot;timeout&quot;</span><span class="p">,</span><span class="n">timeoutValue</span> <span class="p">(</span><span class="n">us</span><span class="p">);</span> 
                                <span class="s2">&quot;timeslice&quot;</span><span class="p">,</span><span class="n">interval</span> <span class="p">(</span><span class="n">us</span><span class="p">),</span><span class="n">yieldtimeout</span> <span class="p">(</span><span class="n">us</span><span class="p">);</span> <span class="s2">&quot;exclusive&quot;</span><span class="o">.</span> <span class="n">The</span> <span class="n">valid</span> <span class="nb">range</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">time</span> <span class="n">values</span> <span class="p">(</span><span class="n">us</span><span class="p">)</span> <span class="ow">is</span> <span class="kn">from</span> <span class="mi">5000</span> <span class="n">to</span> <span class="mi">100</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mf">000.</span>
  <span class="o">--</span><span class="n">performancefactor</span>         <span class="n">Set</span> <span class="n">the</span> <span class="n">tile</span><span class="o">-</span><span class="n">level</span> <span class="n">performance</span> <span class="n">factor</span><span class="o">.</span> <span class="n">Valid</span> <span class="n">options</span><span class="p">:</span> <span class="s2">&quot;compute/media&quot;</span><span class="p">;</span><span class="n">factorValue</span><span class="o">.</span> <span class="n">The</span> <span class="n">factor</span> <span class="n">value</span> <span class="n">should</span> <span class="n">be</span> 
                                <span class="n">between</span> <span class="mi">0</span> <span class="n">to</span> <span class="mf">100.</span> <span class="mi">100</span> <span class="n">means</span> <span class="n">that</span> <span class="n">the</span> <span class="n">workload</span> <span class="ow">is</span> <span class="n">completely</span> <span class="n">compute</span> <span class="n">bounded</span> <span class="ow">and</span> <span class="n">requires</span> <span class="n">very</span> <span class="n">little</span> <span class="n">support</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">memory</span> <span class="n">support</span><span class="o">.</span> <span class="mi">0</span> <span class="n">means</span> <span class="n">that</span> <span class="n">the</span> <span class="n">workload</span> <span class="ow">is</span> <span class="n">completely</span> <span class="n">memory</span> <span class="n">bounded</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">performance</span> <span class="n">of</span> <span class="n">the</span> <span class="n">memory</span> <span class="n">controller</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">increased</span><span class="o">.</span> 
  <span class="o">--</span><span class="n">xelinkport</span>                <span class="n">Change</span> <span class="n">the</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">port</span> <span class="n">status</span><span class="o">.</span> <span class="n">The</span> <span class="n">value</span> <span class="mi">0</span> <span class="n">means</span> <span class="n">down</span> <span class="ow">and</span> <span class="mi">1</span> <span class="n">means</span> <span class="n">up</span><span class="o">.</span>
  <span class="o">--</span><span class="n">xelinkportbeaconing</span>       <span class="n">Change</span> <span class="n">the</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">port</span> <span class="n">beaconing</span> <span class="n">status</span><span class="o">.</span> <span class="n">The</span> <span class="n">value</span> <span class="mi">0</span> <span class="n">means</span> <span class="n">off</span> <span class="ow">and</span> <span class="mi">1</span> <span class="n">means</span> <span class="n">on</span><span class="o">.</span>
  <span class="o">--</span><span class="n">memoryecc</span>                 <span class="n">Enable</span><span class="o">/</span><span class="n">disable</span> <span class="n">memory</span> <span class="n">ECC</span> <span class="n">setting</span><span class="o">.</span> <span class="mi">0</span><span class="p">:</span><span class="n">disable</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span><span class="n">enable</span>
  <span class="o">--</span><span class="n">reset</span>                     <span class="n">Reset</span> <span class="n">device</span> <span class="n">by</span> <span class="n">SBR</span> <span class="p">(</span><span class="n">Secondary</span> <span class="n">Bus</span> <span class="n">Reset</span><span class="p">)</span><span class="o">.</span> <span class="n">For</span> <span class="n">Max</span> <span class="n">series</span> <span class="n">GPU</span><span class="p">,</span> <span class="n">add</span> <span class="s2">&quot;pci=realloc=off&quot;</span> <span class="n">into</span> <span class="n">the</span> <span class="n">Linux</span> <span class="n">kernel</span> <span class="n">boot</span> <span class="n">parameter</span> <span class="n">when</span> <span class="n">SR</span><span class="o">-</span><span class="n">IOV</span> <span class="ow">is</span> <span class="n">enabled</span> <span class="ow">in</span> 
                                <span class="n">BIOS</span><span class="o">.</span> <span class="n">If</span> <span class="n">SR</span><span class="o">-</span><span class="n">IOV</span> <span class="ow">is</span> <span class="n">disabled</span><span class="p">,</span> <span class="n">add</span> <span class="s2">&quot;pci=realloc=on&quot;</span> <span class="n">into</span> <span class="n">the</span> <span class="n">Linux</span> <span class="n">kernel</span> <span class="n">boot</span> <span class="n">parameter</span><span class="o">.</span> 
  <span class="o">--</span><span class="n">ppr</span>                       <span class="n">Apply</span> <span class="n">PPR</span> <span class="n">to</span> <span class="n">the</span> <span class="n">device</span><span class="o">.</span>

</pre></div>
</div>
<p>show the GPU settings</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span>
<span class="o">+-------------+-------------------+----------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">Type</span> <span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span><span class="o">/</span><span class="n">Tile</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Configuration</span>                                                  <span class="o">|</span>
<span class="o">+-------------+-------------------+----------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span>         <span class="o">|</span> <span class="mi">0</span>                 <span class="o">|</span> <span class="n">Power</span> <span class="n">Limit</span> <span class="p">(</span><span class="n">w</span><span class="p">):</span> <span class="mf">300.0</span>                                         <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Valid</span> <span class="n">Range</span><span class="p">:</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">500</span>                                        <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Memory</span> <span class="n">ECC</span><span class="p">:</span>                                                    <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Current</span><span class="p">:</span> <span class="n">enabled</span>                                             <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Pending</span><span class="p">:</span> <span class="n">enabled</span>                                             <span class="o">|</span>
<span class="o">+-------------+-------------------+----------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span>         <span class="o">|</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>               <span class="o">|</span> <span class="n">GPU</span> <span class="n">Min</span> <span class="n">Frequency</span><span class="p">(</span><span class="n">MHz</span><span class="p">):</span> <span class="mf">300.0</span>                                  <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">GPU</span> <span class="n">Max</span> <span class="n">Frequency</span><span class="p">(</span><span class="n">MHz</span><span class="p">):</span> <span class="mf">1300.0</span>                                 <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Valid</span> <span class="n">Options</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">450</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span><span class="mi">550</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">650</span><span class="p">,</span> <span class="mi">700</span>    <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>       <span class="mi">750</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">850</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">950</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1050</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1150</span><span class="p">,</span> <span class="mi">1200</span>    <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>       <span class="mi">1250</span><span class="p">,</span> <span class="mi">1300</span>                                               <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Standby</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">default</span>                                          <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Valid</span> <span class="n">Options</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span> <span class="n">never</span>                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Scheduler</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">timeslice</span>                                      <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Interval</span><span class="p">(</span><span class="n">us</span><span class="p">):</span> <span class="mi">5000</span>                                           <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Yield</span> <span class="n">Timeout</span> <span class="p">(</span><span class="n">us</span><span class="p">):</span> <span class="mi">640000</span>                                   <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Engine</span> <span class="n">Type</span><span class="p">:</span> <span class="n">compute</span>                                           <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Performance</span> <span class="n">Factor</span><span class="p">:</span> <span class="mi">70</span>                                       <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Engine</span> <span class="n">Type</span><span class="p">:</span> <span class="n">media</span>                                             <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Performance</span> <span class="n">Factor</span><span class="p">:</span> <span class="mi">50</span>                                       <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">ports</span><span class="p">:</span>                                                 <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Up</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span>                                                  <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Down</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span>                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Beaconing</span> <span class="n">On</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span>                                        <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Beaconing</span> <span class="n">Off</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span>                                       <span class="o">|</span>
<span class="o">+-------------+-------------------+----------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span>         <span class="o">|</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>               <span class="o">|</span> <span class="n">GPU</span> <span class="n">Min</span> <span class="n">Frequency</span><span class="p">(</span><span class="n">MHz</span><span class="p">):</span> <span class="mf">300.0</span>                                  <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">GPU</span> <span class="n">Max</span> <span class="n">Frequency</span><span class="p">(</span><span class="n">MHz</span><span class="p">):</span> <span class="mf">1300.0</span>                                 <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Valid</span> <span class="n">Options</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">450</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span><span class="mi">550</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">650</span><span class="p">,</span> <span class="mi">700</span>    <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>     <span class="mi">750</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">850</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">950</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1050</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1150</span><span class="p">,</span> <span class="mi">1200</span>      <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>     <span class="mi">1250</span><span class="p">,</span> <span class="mi">1300</span>                                                 <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Standby</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">default</span>                                          <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Valid</span> <span class="n">Options</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span> <span class="n">never</span>                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Scheduler</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">timeslice</span>                                      <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Interval</span><span class="p">(</span><span class="n">us</span><span class="p">):</span> <span class="mi">5000</span>                                           <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Yield</span> <span class="n">Timeout</span> <span class="p">(</span><span class="n">us</span><span class="p">):</span> <span class="mi">640000</span>                                   <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Engine</span> <span class="n">Type</span><span class="p">:</span> <span class="n">compute</span>                                           <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Performance</span> <span class="n">Factor</span><span class="p">:</span> <span class="mi">70</span>                                       <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Engine</span> <span class="n">Type</span><span class="p">:</span> <span class="n">media</span>                                             <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Performance</span> <span class="n">Factor</span><span class="p">:</span> <span class="mi">50</span>                                       <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>                                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">ports</span><span class="p">:</span>                                                 <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Up</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span>                                                  <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Down</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span>                                                <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Beaconing</span> <span class="n">On</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span>                                        <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>                   <span class="o">|</span>   <span class="n">Beaconing</span> <span class="n">Off</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span>                                       <span class="o">|</span>
<span class="o">+-------------+-------------------+----------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Change the GPU tile core frequency range.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">--</span><span class="n">frequencyrange</span> <span class="mi">1200</span><span class="p">,</span><span class="mi">1300</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="n">change</span> <span class="n">the</span> <span class="n">core</span> <span class="n">frequency</span> <span class="nb">range</span> <span class="n">on</span> <span class="n">GPU</span> <span class="mi">0</span> <span class="n">tile</span> <span class="mf">0.</span>
</pre></div>
</div>
<p>Change the GPU power limit.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">--</span><span class="n">powerlimit</span> <span class="mi">299</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">power</span> <span class="n">limit</span> <span class="n">on</span> <span class="n">GPU</span> <span class="mf">0.</span>
</pre></div>
</div>
<p>Change the GPU memory ECC mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">--</span><span class="n">memoryecc</span> <span class="mi">0</span>
<span class="n">Return</span><span class="p">:</span> <span class="n">Succeed</span> <span class="n">to</span> <span class="n">change</span> <span class="n">the</span> <span class="n">ECC</span> <span class="n">mode</span> <span class="n">to</span> <span class="n">be</span> <span class="n">disabled</span> <span class="n">on</span> <span class="n">GPU</span> <span class="mf">0.</span> <span class="n">Please</span> <span class="n">reset</span> <span class="n">GPU</span> <span class="ow">or</span> <span class="n">reboot</span> <span class="n">OS</span> <span class="n">to</span> <span class="n">take</span> <span class="n">effect</span><span class="o">.</span>
</pre></div>
</div>
<p>Change the GPU tile standby mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">--</span><span class="n">standby</span> <span class="n">never</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="n">change</span> <span class="n">the</span> <span class="n">standby</span> <span class="n">mode</span> <span class="n">on</span> <span class="n">GPU</span> <span class="mf">0.</span>
</pre></div>
</div>
<p>Change the GPU tile scheduler mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">--</span><span class="n">scheduler</span> <span class="n">timeout</span><span class="p">,</span><span class="mi">640000</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="n">change</span> <span class="n">the</span> <span class="n">scheduler</span> <span class="n">mode</span> <span class="n">on</span> <span class="n">GPU</span> <span class="mi">0</span> <span class="n">tile</span> <span class="mf">0.</span>
</pre></div>
</div>
<p>Set the performance factor</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">--</span><span class="n">performancefactor</span> <span class="n">compute</span><span class="p">,</span><span class="mi">70</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="n">change</span> <span class="n">the</span> <span class="n">compute</span> <span class="n">performance</span> <span class="n">factor</span> <span class="n">to</span> <span class="mi">70</span> <span class="n">on</span> <span class="n">GPU</span> <span class="mi">0</span> <span class="n">tile</span> <span class="mf">0.</span>
</pre></div>
</div>
<p>Change the Xe Link port status</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">--</span><span class="n">xelinkport</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="n">change</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">port</span> <span class="mi">0</span> <span class="n">to</span> <span class="n">up</span><span class="o">.</span>
</pre></div>
</div>
<p>Change the Xe Link port beaconing status</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">config</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">t</span> <span class="mi">0</span> <span class="o">--</span><span class="n">xelinkportbeaconing</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="n">change</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">port</span> <span class="mi">0</span> <span class="n">beaconing</span> <span class="n">to</span> <span class="n">on</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="get-and-set-the-policy-automatic-action-triggered-by-the-condition">
<h2>Get and set the policy, automatic action triggered by the condition<a class="headerlink" href="#get-and-set-the-policy-automatic-action-triggered-by-the-condition" title="Permalink to this headline"></a></h2>
<p>The supported policies are list in the table below. For example, if the “GPU Core Temperature” policy is set and one GPU tile temperature is more than the specified threshold, the GPU throttling action will be taken automatically.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Types</p></th>
<th class="text-left head"><p>Conditions</p></th>
<th class="text-left head"><p>Actions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>1. GPU Core Temperature</p></td>
<td class="text-left"><p>1. More than</p></td>
<td class="text-left"><p>1. Throttle GPU Core</p></td>
</tr>
</tbody>
</table>
<p>Help info for GPU policy</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">policy</span>

<span class="n">Get</span> <span class="ow">and</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">policies</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">policy</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">l</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">--</span><span class="n">listalltypes</span> 
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">j</span>  
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">--</span><span class="nb">type</span> <span class="mi">1</span> <span class="o">--</span><span class="n">condition</span> <span class="mi">1</span> <span class="o">--</span><span class="n">threshold</span> <span class="p">[</span><span class="n">threshold</span><span class="p">]</span>  <span class="o">--</span><span class="n">action</span> <span class="mi">1</span> <span class="o">--</span><span class="n">throttlefrequencymin</span> <span class="p">[</span><span class="n">frequencyMinValue</span><span class="p">]</span> <span class="o">--</span><span class="n">throttlefrequencymax</span> <span class="p">[</span><span class="n">frequencyMaxValue</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">--</span><span class="nb">type</span> <span class="mi">1</span> <span class="o">--</span><span class="n">condition</span> <span class="mi">1</span> <span class="o">--</span><span class="n">threshold</span> <span class="p">[</span><span class="n">threshold</span><span class="p">]</span>  <span class="o">--</span><span class="n">action</span> <span class="mi">1</span> <span class="o">--</span><span class="n">throttlefrequencymin</span> <span class="p">[</span><span class="n">frequencyMinValue</span><span class="p">]</span> <span class="o">--</span><span class="n">throttlefrequencymax</span> <span class="p">[</span><span class="n">frequencyMaxValue</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">--</span><span class="nb">type</span> <span class="p">[</span><span class="n">policyTypeValue</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">--</span><span class="nb">type</span> <span class="p">[</span><span class="n">policyTypeValue</span><span class="p">]</span>
  


<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span><span class="o">.</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="n">ID</span><span class="o">.</span>
  <span class="o">-</span><span class="n">g</span><span class="p">,</span><span class="o">--</span><span class="n">group</span>                  <span class="n">The</span> <span class="n">group</span> <span class="n">ID</span><span class="o">.</span>

  <span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">--</span><span class="nb">list</span>                   <span class="n">List</span> <span class="nb">all</span> <span class="n">policies</span><span class="o">.</span>
  <span class="o">--</span><span class="n">listalltypes</span>              <span class="n">List</span> <span class="nb">all</span> <span class="n">policy</span> <span class="n">types</span><span class="p">,</span> <span class="n">including</span> <span class="n">the</span> <span class="n">supported</span> <span class="n">condition</span> <span class="ow">and</span> <span class="n">action</span><span class="o">.</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span><span class="o">--</span><span class="n">create</span>                 <span class="n">Create</span> <span class="n">one</span> <span class="n">policy</span>
  <span class="o">-</span><span class="n">r</span><span class="p">,</span><span class="o">--</span><span class="n">remove</span>                 <span class="n">Remove</span> <span class="n">one</span> <span class="n">policy</span><span class="o">.</span> <span class="n">Only</span> <span class="n">the</span> <span class="n">policy</span> <span class="ow">is</span> <span class="n">removed</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">changed</span> <span class="n">GPU</span> <span class="n">settings</span> <span class="n">will</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">resumed</span><span class="o">.</span> 
  
  <span class="o">--</span><span class="nb">type</span>                      <span class="n">Policy</span> <span class="n">types</span><span class="o">.</span>
                                <span class="mf">1.</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span>
  <span class="o">--</span><span class="n">condition</span>                 <span class="n">Conditions</span><span class="o">.</span>
                                <span class="mf">1.</span> <span class="n">More</span> <span class="n">than</span>
  <span class="o">--</span><span class="n">threshold</span>                 <span class="n">Threshold</span>
  <span class="o">--</span><span class="n">action</span>                    <span class="n">Policy</span> <span class="n">action</span><span class="o">.</span>
                                <span class="mf">1.</span> <span class="n">Throttle</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Frequency</span>
  <span class="o">--</span><span class="n">throttlefrequencymin</span>      <span class="n">Throttle</span> <span class="n">GPU</span> <span class="n">frequency</span> <span class="n">to</span> <span class="nb">min</span> <span class="n">value</span>
  <span class="o">--</span><span class="n">throttlefrequencymax</span>      <span class="n">Throttle</span> <span class="n">GPU</span> <span class="n">frequency</span> <span class="n">to</span> <span class="nb">max</span> <span class="n">value</span>
</pre></div>
</div>
<p>Create a policy to throttle GPU when the GPU tile temperature is a little high.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">--</span><span class="nb">type</span> <span class="mi">1</span> <span class="o">--</span><span class="n">condition</span> <span class="mi">1</span> <span class="o">--</span><span class="n">threshold</span> <span class="mi">95</span>  <span class="o">--</span><span class="n">action</span> <span class="mi">1</span> <span class="o">--</span><span class="n">throttlefrequencymin</span> <span class="mi">300</span> <span class="o">--</span><span class="n">throttlefrequencymax</span> <span class="mi">400</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="s2">&quot;1. GPU Core Temperature&quot;</span> <span class="n">policy</span><span class="o">.</span>
</pre></div>
</div>
<p>List all supported policies</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">--</span><span class="n">listalltypes</span>
<span class="o">+-------------------------------+------------------+-----------------------------------------------+</span>
<span class="o">|</span> <span class="n">Types</span>                         <span class="o">|</span><span class="n">Conditions</span>        <span class="o">|</span> <span class="n">Actions</span>                                       <span class="o">|</span>
<span class="o">+-------------------------------+------------------+-----------------------------------------------+</span>
<span class="o">|</span> <span class="mf">1.</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span>       <span class="o">|</span> <span class="mf">1.</span> <span class="n">More</span> <span class="n">than</span>     <span class="o">|</span> <span class="mf">1.</span> <span class="n">Throttle</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Frequency</span>                <span class="o">|</span>
<span class="o">+-------------------------------+------------------+-----------------------------------------------+</span>
</pre></div>
</div>
<p>List all policies set on the GPU.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span>
<span class="o">+-----------+-------------------------------+------------------+-----------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Types</span>                         <span class="o">|</span> <span class="n">Conditions</span>       <span class="o">|</span> <span class="n">Actions</span>                           <span class="o">|</span>
<span class="o">+-----------+-------------------------------+------------------+-----------------------------------+</span>
<span class="o">|</span> <span class="mi">0</span>         <span class="o">|</span> <span class="mf">1.</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Temperature</span>       <span class="o">|</span> <span class="mf">1.</span> <span class="n">More</span> <span class="n">than</span> <span class="mi">95</span>  <span class="o">|</span> <span class="mf">1.</span> <span class="n">Throttle</span> <span class="n">GPU</span> <span class="n">Core</span> <span class="n">Frequency</span>    <span class="o">|</span>
<span class="o">|</span>           <span class="o">|</span>                               <span class="o">|</span>                  <span class="o">|</span>      <span class="nb">min</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span> <span class="mi">400</span>           <span class="o">|</span>
<span class="o">+-----------+-------------------------------+------------------+-----------------------------------+</span>
</pre></div>
</div>
<p>Remove a policy.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">policy</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">--</span><span class="nb">type</span> <span class="mi">1</span>
<span class="n">Succeed</span> <span class="n">to</span> <span class="n">remove</span> <span class="n">the</span> <span class="s2">&quot;1. GPU Core Temperature&quot;</span> <span class="n">policy</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="diagnose-gpu-with-different-test-suites">
<h2>Diagnose GPU with different test suites<a class="headerlink" href="#diagnose-gpu-with-different-test-suites" title="Permalink to this headline"></a></h2>
<p>When running tests on GPU, GPU will be used exclusively. There will be obviously performance impact on the GPU. Some CPU performance may also be impacted.</p>
<p>Help info for GPU diagnostics</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">diag</span>

<span class="n">Run</span> <span class="n">some</span> <span class="n">test</span> <span class="n">suites</span> <span class="n">to</span> <span class="n">diagnose</span> <span class="n">GPU</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">diag</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span> <span class="p">[</span><span class="n">level</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">pciBdfAddress</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span> <span class="p">[</span><span class="n">level</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span> <span class="p">[</span><span class="n">level</span><span class="p">]</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">pciBdfAddress</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span> <span class="p">[</span><span class="n">level</span><span class="p">]</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">--</span><span class="n">singletest</span> <span class="p">[</span><span class="n">testIds</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">pciBdfAddress</span><span class="p">]</span> <span class="o">--</span><span class="n">singletest</span> <span class="p">[</span><span class="n">testIds</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">--</span><span class="n">singletest</span> <span class="p">[</span><span class="n">testIds</span><span class="p">]</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">pciBdfAddress</span><span class="p">]</span> <span class="o">--</span><span class="n">singletest</span> <span class="p">[</span><span class="n">testIds</span><span class="p">]</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">groupId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">j</span>

  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceIds</span><span class="p">]</span> <span class="o">--</span><span class="n">stress</span> <span class="o">--</span><span class="n">stresstime</span> <span class="p">[</span><span class="n">time</span><span class="p">]</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">precheck</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">precheck</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">precheck</span> <span class="o">--</span><span class="n">gpu</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">precheck</span> <span class="o">--</span><span class="n">gpu</span> <span class="o">-</span><span class="n">j</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">precheck</span> <span class="o">--</span><span class="n">listtypes</span>
  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">precheck</span> <span class="o">--</span><span class="n">listtypes</span> <span class="o">-</span><span class="n">j</span>

  <span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">stress</span> <span class="o">--</span><span class="n">stresstime</span> <span class="p">[</span><span class="n">time</span><span class="p">]</span>
  
<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span><span class="o">.</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">The</span> <span class="n">device</span> <span class="n">ID</span><span class="o">.</span>
  <span class="o">-</span><span class="n">g</span><span class="p">,</span><span class="o">--</span><span class="n">group</span>                  <span class="n">The</span> <span class="n">group</span> <span class="n">ID</span><span class="o">.</span>
  <span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">--</span><span class="n">level</span>                  <span class="n">The</span> <span class="n">diagnostic</span> <span class="n">levels</span> <span class="n">to</span> <span class="n">run</span><span class="o">.</span> <span class="n">The</span> <span class="n">valid</span> <span class="n">options</span> <span class="n">include</span>
                                <span class="mf">1.</span> <span class="n">quick</span> <span class="n">test</span>
                                <span class="mf">2.</span> <span class="n">medium</span> <span class="n">test</span> <span class="o">-</span> <span class="n">this</span> <span class="n">diagnostic</span> <span class="n">level</span> <span class="n">will</span> <span class="n">have</span> <span class="n">the</span> <span class="n">significant</span> <span class="n">performance</span> <span class="n">impact</span> <span class="n">on</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">GPUs</span>
                                <span class="mf">3.</span> <span class="n">long</span> <span class="n">test</span> <span class="o">-</span> <span class="n">this</span> <span class="n">diagnostic</span> <span class="n">level</span> <span class="n">will</span> <span class="n">have</span> <span class="n">the</span> <span class="n">significant</span> <span class="n">performance</span> <span class="n">impact</span> <span class="n">on</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">GPUs</span>

  <span class="o">-</span><span class="n">s</span><span class="p">,</span><span class="o">--</span><span class="n">stress</span>                 <span class="n">Stress</span> <span class="n">the</span> <span class="n">GPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">time</span>
  <span class="o">--</span><span class="n">stresstime</span>                <span class="n">Stress</span> <span class="n">time</span> <span class="p">(</span><span class="ow">in</span> <span class="n">minutes</span><span class="p">)</span>

  <span class="o">--</span><span class="n">precheck</span>                  <span class="n">Do</span> <span class="n">the</span> <span class="n">precheck</span> <span class="n">on</span> <span class="n">the</span> <span class="n">GPU</span> <span class="ow">and</span> <span class="n">GPU</span> <span class="n">driver</span><span class="o">.</span>
  <span class="o">--</span><span class="n">listtypes</span>                 <span class="n">List</span> <span class="nb">all</span> <span class="n">supported</span> <span class="n">GPU</span> <span class="n">error</span> <span class="n">types</span>
  <span class="o">--</span><span class="n">gpu</span>                       <span class="n">Show</span> <span class="n">the</span> <span class="n">GPU</span> <span class="n">status</span> <span class="n">only</span>
  <span class="o">--</span><span class="n">since</span>                     <span class="n">Start</span> <span class="n">time</span> <span class="k">for</span> <span class="n">log</span> <span class="n">scanning</span><span class="o">.</span> <span class="n">It</span> <span class="n">only</span> <span class="n">works</span> <span class="k">with</span> <span class="n">the</span> <span class="n">journalctl</span> <span class="n">option</span><span class="o">.</span> <span class="n">The</span> <span class="n">generic</span> <span class="nb">format</span> <span class="ow">is</span> <span class="s2">&quot;YYYY-MM-DD HH:MM:SS&quot;</span><span class="o">.</span>
                              <span class="n">Alternatively</span> <span class="n">the</span> <span class="n">strings</span> <span class="s2">&quot;yesterday&quot;</span><span class="p">,</span> <span class="s2">&quot;today&quot;</span> <span class="n">are</span> <span class="n">also</span> <span class="n">understood</span><span class="o">.</span>
                              <span class="n">Relative</span> <span class="n">times</span> <span class="n">also</span> <span class="n">may</span> <span class="n">be</span> <span class="n">specified</span><span class="p">,</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;-&quot;</span> <span class="n">referring</span> <span class="n">to</span> <span class="n">times</span> <span class="n">before</span> <span class="n">the</span> <span class="n">current</span> <span class="n">time</span><span class="o">.</span>
                              <span class="n">Scanning</span> <span class="n">would</span> <span class="n">start</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">latest</span> <span class="n">boot</span> <span class="k">if</span> <span class="n">it</span> <span class="n">was</span> <span class="ow">not</span> <span class="n">specified</span><span class="o">.</span>
  
  <span class="o">--</span><span class="n">singletest</span>                <span class="n">Selectively</span> <span class="n">run</span> <span class="n">some</span> <span class="n">particular</span> <span class="n">tests</span><span class="o">.</span> <span class="n">Separated</span> <span class="n">by</span> <span class="n">the</span> <span class="n">comma</span><span class="o">.</span>
                                    <span class="mf">1.</span> <span class="n">Computation</span>
                                    <span class="mf">2.</span> <span class="n">Memory</span> <span class="n">Error</span>
                                    <span class="mf">3.</span> <span class="n">Memory</span> <span class="n">Bandwidth</span>
                                    <span class="mf">4.</span> <span class="n">Media</span> <span class="n">Codec</span>
                                    <span class="mf">5.</span> <span class="n">PCIe</span> <span class="n">Bandwidth</span>
                                    <span class="mf">6.</span> <span class="n">Power</span>
                                    <span class="mf">7.</span> <span class="n">Computation</span> <span class="n">functional</span> <span class="n">test</span>
                                    <span class="mf">8.</span> <span class="n">Media</span> <span class="n">Codec</span> <span class="n">functional</span> <span class="n">test</span>
                                    <span class="mf">9.</span> <span class="n">Xe</span> <span class="n">Link</span> <span class="n">Throughput</span>
</pre></div>
</div>
<p>Run test to diagnose GPU</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">l</span> <span class="mi">1</span>
<span class="n">Device</span> <span class="n">Type</span><span class="p">:</span> <span class="n">GPU</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span>              <span class="o">|</span> <span class="mi">0</span>                                                                       <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Level</span>                  <span class="o">|</span> <span class="mi">1</span>                                                                       <span class="o">|</span>
<span class="o">|</span> <span class="n">Result</span>                 <span class="o">|</span> <span class="n">Pass</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Items</span>                  <span class="o">|</span> <span class="mi">4</span>                                                                       <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Software</span> <span class="n">Env</span> <span class="n">Variables</span> <span class="o">|</span> <span class="n">Result</span><span class="p">:</span> <span class="n">Pass</span>                                                            <span class="o">|</span>
<span class="o">|</span>                        <span class="o">|</span> <span class="n">Message</span><span class="p">:</span> <span class="n">Pass</span> <span class="n">to</span> <span class="n">check</span> <span class="n">environment</span> <span class="n">variables</span><span class="o">.</span>                           <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Software</span> <span class="n">Library</span>       <span class="o">|</span> <span class="n">Result</span><span class="p">:</span> <span class="n">Pass</span>                                                            <span class="o">|</span>
<span class="o">|</span>                        <span class="o">|</span> <span class="n">Message</span><span class="p">:</span> <span class="n">Pass</span> <span class="n">to</span> <span class="n">check</span> <span class="n">libraries</span>                                        <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Software</span> <span class="n">Permission</span>    <span class="o">|</span> <span class="n">Result</span><span class="p">:</span> <span class="n">Pass</span>                                                            <span class="o">|</span>
<span class="o">|</span>                        <span class="o">|</span> <span class="n">Message</span><span class="p">:</span> <span class="n">Pass</span> <span class="n">to</span> <span class="n">check</span> <span class="n">permission</span>                                       <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Software</span> <span class="n">Exclusive</span>     <span class="o">|</span> <span class="n">Result</span><span class="p">:</span> <span class="n">Pass</span>                                                            <span class="o">|</span>
<span class="o">|</span>                        <span class="o">|</span> <span class="n">Message</span><span class="p">:</span> <span class="ne">Warning</span><span class="p">:</span> <span class="mi">2</span> <span class="n">process</span><span class="p">(</span><span class="n">es</span><span class="p">)</span> <span class="n">are</span> <span class="n">using</span> <span class="n">the</span> <span class="n">device</span><span class="o">.</span>                   <span class="o">|</span>
<span class="o">|</span>                        <span class="o">|</span>   <span class="n">PID</span><span class="p">:</span> <span class="mi">633972</span><span class="p">,</span> <span class="n">Command</span><span class="p">:</span> <span class="o">./</span><span class="n">ze_gemm</span>                                       <span class="o">|</span>
<span class="o">|</span>                        <span class="o">|</span>   <span class="n">PID</span><span class="p">:</span> <span class="mi">633973</span><span class="p">,</span> <span class="n">Command</span><span class="p">:</span> <span class="o">./</span><span class="n">ze_gemm</span>                                       <span class="o">|</span>
<span class="o">+------------------------+-------------------------------------------------------------------------+</span>

</pre></div>
</div>
<p>Pre-check the GPU and GPU driver status</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">precheck</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Component</span>        <span class="o">|</span> <span class="n">Details</span>                                                                       <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Driver</span>           <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Pass</span>                                                                  <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">CPU</span>              <span class="o">|</span> <span class="n">CPU</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">0</span>                                                                     <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Pass</span>                                                                  <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">CPU</span>              <span class="o">|</span> <span class="n">CPU</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>                                                                     <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Pass</span>                                                                  <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">GPU</span>              <span class="o">|</span> <span class="n">BDF</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">3</span><span class="n">a</span><span class="p">:</span><span class="mf">00.0</span>                                                             <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Pass</span>                                                                  <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>

</pre></div>
</div>
<p>Stress the GPUs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">--</span><span class="n">stress</span>
<span class="n">Stress</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">GPU</span>
<span class="n">Device</span><span class="p">:</span> <span class="mi">0</span> <span class="n">Finished</span><span class="p">:</span><span class="mi">0</span> <span class="n">Time</span><span class="p">:</span> <span class="mi">0</span> <span class="n">seconds</span>
<span class="n">Device</span><span class="p">:</span> <span class="mi">1</span> <span class="n">Finished</span><span class="p">:</span><span class="mi">0</span> <span class="n">Time</span><span class="p">:</span> <span class="mi">0</span> <span class="n">seconds</span>
<span class="n">Device</span><span class="p">:</span> <span class="mi">0</span> <span class="n">Finished</span><span class="p">:</span><span class="mi">0</span> <span class="n">Time</span><span class="p">:</span> <span class="mi">5</span> <span class="n">seconds</span>
<span class="n">Device</span><span class="p">:</span> <span class="mi">1</span> <span class="n">Finished</span><span class="p">:</span><span class="mi">0</span> <span class="n">Time</span><span class="p">:</span> <span class="mi">5</span> <span class="n">seconds</span>

</pre></div>
</div>
<p>Run the particular tests on the specified GPU</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">diag</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">--</span><span class="n">singletest</span> <span class="mi">1</span><span class="p">,</span><span class="mi">4</span>
<span class="o">+-------------------------+------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">ID</span>               <span class="o">|</span> <span class="mi">0</span>                                                                      <span class="o">|</span>
<span class="o">+-------------------------+------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Performance</span> <span class="n">Computation</span> <span class="o">|</span> <span class="n">Result</span><span class="p">:</span> <span class="n">Pass</span>                                                           <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span> <span class="n">Message</span><span class="p">:</span> <span class="n">Pass</span> <span class="n">to</span> <span class="n">check</span> <span class="n">computation</span> <span class="n">performance</span><span class="o">.</span> <span class="n">Its</span> <span class="n">single</span><span class="o">-</span><span class="n">precision</span>   <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>   <span class="n">GFLOPS</span> <span class="ow">is</span> <span class="mf">11120.225</span><span class="o">.</span>                                                 <span class="o">|</span>
<span class="o">+-------------------------+------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Media</span> <span class="n">Codec</span>             <span class="o">|</span> <span class="n">Result</span><span class="p">:</span> <span class="n">Pass</span>                                                           <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span> <span class="n">Message</span><span class="p">:</span> <span class="n">Pass</span> <span class="n">to</span> <span class="n">check</span> <span class="n">Media</span> <span class="n">transcode</span> <span class="n">performance</span><span class="o">.</span>                    <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>  <span class="mi">1080</span><span class="n">p</span> <span class="n">H</span><span class="mf">.265</span> <span class="p">:</span> <span class="mi">474</span> <span class="n">FPS</span>                                                 <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>  <span class="mi">1080</span><span class="n">p</span> <span class="n">H</span><span class="mf">.264</span> <span class="p">:</span> <span class="mi">430</span> <span class="n">FPS</span>                                                 <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>  <span class="mi">4</span><span class="n">K</span> <span class="n">H</span><span class="mf">.265</span> <span class="p">:</span> <span class="mi">139</span> <span class="n">FPS</span>                                                    <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>  <span class="mi">4</span><span class="n">K</span> <span class="n">H</span><span class="mf">.264</span> <span class="p">:</span> <span class="mi">119</span> <span class="n">FPS</span>                                                    <span class="o">|</span>
<span class="o">+-------------------------+------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="show-amc-real-time-sensor-readings">
<h2>Show AMC real-time sensor readings<a class="headerlink" href="#show-amc-real-time-sensor-readings" title="Permalink to this headline"></a></h2>
<p>This command only works for Intel(R) Data Center GPU Flex 140/170 on Intel M50CYP servers.</p>
<p>Help info for get AMC senor readings</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">amcsensor</span> <span class="o">-</span><span class="n">h</span>
<span class="n">List</span> <span class="n">the</span> <span class="n">AMC</span> <span class="n">real</span><span class="o">-</span><span class="n">time</span> <span class="n">sensor</span> <span class="n">readings</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">amcsensor</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
 <span class="n">xpumcli</span> <span class="n">amcsensor</span>
 <span class="n">xpumcli</span> <span class="n">amcsensor</span> <span class="o">-</span><span class="n">j</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

</pre></div>
</div>
<p>Get the AMC sensor readings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">amcsensor</span>
<span class="o">+--------+-----------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">AMC</span> <span class="n">ID</span> <span class="o">|</span> <span class="n">Sensors</span>                                                                                 <span class="o">|</span>
<span class="o">+--------+-----------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">AMC</span> <span class="mi">0</span>  <span class="o">|</span>                                                                                         <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="n">temp_sensor_0</span> <span class="p">(</span><span class="n">degrees</span> <span class="n">C</span><span class="p">):</span> <span class="mi">41</span>                                                           <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="n">temp_sensor_1</span> <span class="p">(</span><span class="n">degrees</span> <span class="n">C</span><span class="p">):</span> <span class="mi">39</span>                                                           <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="n">VCCGT_GPU2_volt</span> <span class="p">(</span><span class="n">Volts</span><span class="p">):</span> <span class="mf">0.093</span>                                                          <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="n">soc_die_temp_1</span> <span class="p">(</span><span class="n">degrees</span> <span class="n">C</span><span class="p">):</span> <span class="mi">46</span>                                                          <span class="o">|</span>
<span class="o">|</span>        <span class="o">|</span> <span class="n">soc_die_temp_2</span> <span class="p">(</span><span class="n">degrees</span> <span class="n">C</span><span class="p">):</span> <span class="mi">45</span>                                                          <span class="o">|</span>
<span class="o">+--------+-----------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="collect-the-gpu-debug-log-files">
<h2>Collect the GPU debug log files<a class="headerlink" href="#collect-the-gpu-debug-log-files" title="Permalink to this headline"></a></h2>
<p>Help info of collecting GPU log files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">log</span> <span class="o">-</span><span class="n">h</span>
<span class="n">Collect</span> <span class="n">GPU</span> <span class="n">debug</span> <span class="n">logs</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">log</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
 <span class="n">xpumcli</span> <span class="n">log</span> <span class="o">-</span><span class="n">f</span> <span class="p">[</span><span class="n">tarGzipFileName</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">-</span><span class="n">f</span><span class="p">,</span><span class="o">--</span><span class="n">file</span>                   <span class="n">The</span> <span class="n">file</span> <span class="p">(</span><span class="n">a</span> <span class="n">tar</span><span class="o">.</span><span class="n">gz</span><span class="p">)</span> <span class="n">to</span> <span class="n">archive</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">debug</span> <span class="n">logs</span>
</pre></div>
</div>
<p>Collect the GPU log files. If the filename is specified with the relative filepath, the log file is generated under the XPU Manager daemon working folder (under “/” by default). You may use the absolute filepath for easy to find.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">log</span> <span class="o">-</span><span class="n">f</span> <span class="mf">1217.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">Done</span>
</pre></div>
</div>
</section>
<section id="set-up-gpu-sr-iov-configuration">
<h2>Set up GPU SR-IOV configuration<a class="headerlink" href="#set-up-gpu-sr-iov-configuration" title="Permalink to this headline"></a></h2>
<p>Only Ubuntu and CentOS 7 are validated.</p>
<section id="bios-settings-for-gpu-sr-iov">
<h3>BIOS settings for GPU SR-IOV<a class="headerlink" href="#bios-settings-for-gpu-sr-iov" title="Permalink to this headline"></a></h3>
<section id="intel-m50cyp">
<h4>Intel M50CYP<a class="headerlink" href="#intel-m50cyp" title="Permalink to this headline"></a></h4>
<p>Advanced -&gt; PCI Configuration -&gt; Memory Mapped I/O above 4GB : Enabled<br />
Advanced -&gt; PCI Configuration -&gt; MMIO High Base : 56T<br />
Advanced -&gt; PCI Configuration -&gt; Memory Mapped I/O Size : 1024G<br />
Advanced -&gt; System Acoustic and Performance Configuration -&gt; Set Fan Profile : Performance<br />
Advanced -&gt; Integrated IO Configuration -&gt; PCIe Misc. Configuration -&gt; PCIe ASPM Support (Global) : Disabled<br />
Advanced -&gt; Power &amp; Performance -&gt; Workload Configuration : I/O Sensitive<br />
Advanced -&gt; Power &amp; Performance -&gt; CPU P State Control -&gt; Intel(R) Turbo Boost Technology : Enabled<br />
Advanced -&gt; PCI Configuration -&gt; SR-IOV Support : Enabled<br />
Advanced -&gt; Processor Configuration -&gt; Intel(R) Virtualization Technology: Enabled<br />
Advanced -&gt; Integrated IO Configuration -&gt; Intel(R) VT for Directed I/O : Enabled</p>
</section>
<section id="inspur-nf5280m6">
<h4>Inspur NF5280M6<a class="headerlink" href="#inspur-nf5280m6" title="Permalink to this headline"></a></h4>
<p>MMCFG Base = Auto<br />
MMCFG Size = Auto<br />
MMIO High Base = 32T<br />
MMIO High Granularity Size = 1024G<br />
VMX = Enabled<br />
SR-IOV Support = Enabled<br />
Intel VT for Directed I/O (VT-d) = Enabled<br />
Power/Performance Profile = Virtualization</p>
</section>
<section id="h3c-r5300-g5">
<h4>H3C R5300 G5<a class="headerlink" href="#h3c-r5300-g5" title="Permalink to this headline"></a></h4>
<p>MMCFG Base=Auto<br />
MMIO High Base=32T<br />
MMIO High Granularity Size=1024G<br />
VMX=Enabled<br />
SR-IOV Support=Enabled<br />
Intel    VT for Directed I/O=Enabled<br />
ENERGY_PERF_BIAS_CFG mode=Performance<br />
Workload Configuration=Balanced<br />
Workload Profile Configuration=Graphic Processing</p>
</section>
<section id="dell-poweredge-xr12">
<h4>Dell PowerEdge XR12<a class="headerlink" href="#dell-poweredge-xr12" title="Permalink to this headline"></a></h4>
<p>Integrated Devices -&gt; Memory Mapped I/O above 4GB = Enabled<br />
Integrated Devices -&gt; Memory Mapped Base = 56TB<br />
Integrated Devices -&gt; SR-IOV Global Enable = Enabled<br />
Processor Settings -&gt; Virtualization Technology = Enabled<br />
System Profile Settings -&gt; System Profile = Performance</p>
</section>
<section id="supermicro-sys-620c-tn12r">
<h4>Supermicro SYS-620C-TN12R<a class="headerlink" href="#supermicro-sys-620c-tn12r" title="Permalink to this headline"></a></h4>
<p>Advanced -&gt; Chipset Configuration -&gt; NorthBridge -&gt; IIO Configuration -&gt; Intel VT for Directed I/O (VT-d) -&gt; Enable<br />
Advanced -&gt; Chipset Configuration -&gt; NorthBridge -&gt; IIO Configuration -&gt; PCI-E ASPM Support (Global) -&gt; No<br />
Advanced -&gt; Chipset Configuration -&gt; NorthBridge -&gt; IIO Configuration -&gt; IIO eDPC Support -&gt; Disable<br />
Advanced -&gt; PCIe/PCI/PnP Configuration -&gt; Above 4G Decoding -&gt; Enabled<br />
Advanced -&gt; PCIe/PCI/PnP Configuration -&gt; SR-IOV Support -&gt; Enable<br />
Advanced -&gt; PCIe/PCI/PnP Configuration -&gt; ARI Support -&gt; Enable<br />
Advanced -&gt; PCIe/PCI/PnP Configuration -&gt; MMCFG Base -&gt; Auto<br />
Advanced -&gt; PCIe/PCI/PnP Configuration -&gt; MMIO High Base -&gt; 32T<br />
Advanced -&gt; PCIE/PCI/PnP Configuration -&gt; MMIO High Granularity Size -&gt; 1024G or 2048G</p>
</section>
<section id="hpe-proliant-dl380-gen10">
<h4>HPE ProLiant DL380 Gen10<a class="headerlink" href="#hpe-proliant-dl380-gen10" title="Permalink to this headline"></a></h4>
<p>Virtualization Options -&gt; Intel(R) Virtualization Technology: Enabled<br />
Virtualization Options -&gt; Intel(R) VT-d: Enabled<br />
Virtualization Options -&gt; SR-IOV: Enabled</p>
</section>
</section>
<section id="add-linux-kernel-command-line-options">
<h3>Add Linux kernel command line options<a class="headerlink" href="#add-linux-kernel-command-line-options" title="Permalink to this headline"></a></h3>
<p>After BIOS settings are rightly configured and the GPU driver is installed, some kernel command line options need be added into the “GRUB_CMDLINE_LINUX” setting of the file, /etc/default/grub. They are “intel_iommu=on i915.max_vfs=31”. “intel_iommmu” is for IOMMU and “i915.max_vfs” is for SR-IOV. After you update the grub file, please run the command like “update-grub” to set to kernel image and reboot OS to take effect. You may check the content of /proc/cmdline to confirm that they are rightly set.
The command “sudo xpumcli vgpu –addkernelparam” can automatically add these kernel parameters.</p>
</section>
<section id="help-info-of-gpu-sr-iov-configuration-feature">
<h3>Help info of GPU SR-IOV configuration feature.<a class="headerlink" href="#help-info-of-gpu-sr-iov-configuration-feature" title="Permalink to this headline"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xpumcli</span> <span class="n">vgpu</span>
<span class="n">Create</span> <span class="ow">and</span> <span class="n">remove</span> <span class="n">virtual</span> <span class="n">GPUs</span> <span class="ow">in</span> <span class="n">SR</span><span class="o">-</span><span class="n">IOV</span> <span class="n">configuration</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">--</span><span class="n">precheck</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">--</span><span class="n">addkernelparam</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">n</span> <span class="p">[</span><span class="n">vGpuNumber</span><span class="p">]</span> <span class="o">--</span><span class="n">lmem</span> <span class="p">[</span><span class="n">vGpuMemorySize</span><span class="p">]</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">pciBdfAddress</span><span class="p">]</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">n</span> <span class="p">[</span><span class="n">vGpuNumber</span><span class="p">]</span> <span class="o">--</span><span class="n">lmem</span> <span class="p">[</span><span class="n">vGpuMemorySize</span><span class="p">]</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">r</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">pciBdfAddress</span><span class="p">]</span> <span class="o">-</span><span class="n">r</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">deviceId</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span>
 <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="p">[</span><span class="n">pciBdfAddress</span><span class="p">]</span> <span class="o">-</span><span class="n">l</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">j</span><span class="p">,</span><span class="o">--</span><span class="n">json</span>                   <span class="n">Print</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">JSON</span> <span class="nb">format</span>

  <span class="o">--</span><span class="n">precheck</span>                  <span class="n">Check</span> <span class="k">if</span> <span class="n">BIOS</span> <span class="n">settings</span> <span class="ow">and</span> <span class="n">kernel</span> <span class="n">command</span> <span class="n">line</span> <span class="n">options</span> <span class="n">are</span> <span class="n">ready</span> <span class="n">to</span> <span class="n">create</span> <span class="n">virtual</span> <span class="n">GPUs</span>
  <span class="o">--</span><span class="n">addkernelparam</span>            <span class="n">Add</span> <span class="n">the</span> <span class="n">kernel</span> <span class="n">command</span> <span class="n">line</span> <span class="n">parameters</span> <span class="k">for</span> <span class="n">the</span> <span class="n">virtual</span> <span class="n">GPUs</span>

  <span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="o">--</span><span class="n">device</span>                 <span class="n">Device</span> <span class="n">ID</span> <span class="ow">or</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">address</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span><span class="o">--</span><span class="n">create</span>                 <span class="n">Create</span> <span class="n">the</span> <span class="n">virtual</span> <span class="n">GPUs</span>
  <span class="o">-</span><span class="n">n</span>                          <span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">virtual</span> <span class="n">GPUs</span> <span class="n">to</span> <span class="n">create</span><span class="o">.</span>
  <span class="o">--</span><span class="n">lmem</span>                      <span class="n">The</span> <span class="n">memory</span> <span class="n">size</span> <span class="n">of</span> <span class="n">each</span> <span class="n">virtual</span> <span class="n">GPUs</span><span class="p">,</span> <span class="ow">in</span> <span class="n">MiB</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="o">--</span><span class="n">lmem</span> <span class="mf">500.</span> <span class="n">This</span> <span class="n">parameter</span> <span class="ow">is</span> <span class="n">optional</span><span class="o">.</span> 

  <span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">--</span><span class="nb">list</span>                   <span class="n">List</span> <span class="nb">all</span> <span class="n">virtual</span> <span class="n">GPUs</span> <span class="n">on</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">physical</span> <span class="n">GPU</span>

  <span class="o">-</span><span class="n">r</span><span class="p">,</span><span class="o">--</span><span class="n">remove</span>                 <span class="n">Remove</span> <span class="nb">all</span> <span class="n">virtual</span> <span class="n">GPUs</span> <span class="n">on</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">physical</span> <span class="n">GPU</span>
  <span class="o">-</span><span class="n">y</span><span class="p">,</span><span class="o">--</span><span class="n">assumeyes</span>              <span class="n">Assume</span> <span class="n">that</span> <span class="n">the</span> <span class="n">answer</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">question</span> <span class="n">which</span> <span class="n">would</span> <span class="n">be</span> <span class="n">asked</span> <span class="ow">is</span> <span class="n">yes</span>
</pre></div>
</div>
</section>
<section id="gpu-sr-iov-precheck">
<h3>GPU SR-IOV precheck<a class="headerlink" href="#gpu-sr-iov-precheck" title="Permalink to this headline"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">--</span><span class="n">precheck</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">VMX</span> <span class="n">Flag</span>         <span class="o">|</span> <span class="n">Result</span><span class="p">:</span> <span class="n">Pass</span>                                                                  <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Message</span><span class="p">:</span>                                                                      <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">SR</span><span class="o">-</span><span class="n">IOV</span>           <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Fail</span>                                                                  <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Message</span><span class="p">:</span> <span class="n">SR</span><span class="o">-</span><span class="n">IOV</span> <span class="ow">is</span> <span class="n">disabled</span><span class="o">.</span> <span class="n">Please</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">related</span> <span class="n">BIOS</span> <span class="n">settings</span> <span class="ow">and</span>         <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>   <span class="n">kernel</span> <span class="n">command</span> <span class="n">line</span> <span class="n">options</span><span class="o">.</span>                                                <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">IOMMU</span>            <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">Pass</span>                                                                  <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Message</span><span class="p">:</span>                                                                      <span class="o">|</span>
<span class="o">+------------------+-------------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="add-the-linux-kernel-command-line-parameters-for-the-virtual-gpus">
<h3>Add the Linux kernel command line parameters for the virtual GPUs<a class="headerlink" href="#add-the-linux-kernel-command-line-parameters-for-the-virtual-gpus" title="Permalink to this headline"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo xpumcli vgpu --addkernelparam -y
Do you want to add the required kernel command line parameters? (y/n) y
Succeed in adding the required kernel command line parameters, &quot;intel_iommu=on i915.max_vfs=31&quot;. &quot;intel_iommmu&quot; is for IOMMU and &quot;i915.max_vfs&quot; is for SR-IOV. Please reboot OS to take effect. 
</pre></div>
</div>
</section>
<section id="create-the-virtual-gpus">
<h3>Create the virtual GPUs<a class="headerlink" href="#create-the-virtual-gpus" title="Permalink to this headline"></a></h3>
<p>After all GPU SR-IOV pre-checks are passed, you may create the virtual GPUs</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">n</span> <span class="mi">4</span> <span class="o">--</span><span class="n">lmem</span> <span class="mi">500</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">Information</span>                                                                               <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.0</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">physical</span>                                                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">14260.97</span> <span class="n">MiB</span>                                                               <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.1</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.2</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.3</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.4</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="list-the-virtual-gpus">
<h3>list the virtual GPUs<a class="headerlink" href="#list-the-virtual-gpus" title="Permalink to this headline"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">l</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Device</span> <span class="n">Information</span>                                                                               <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.0</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">physical</span>                                                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">14260.97</span> <span class="n">MiB</span>                                                               <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.1</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.2</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.3</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">PCI</span> <span class="n">BDF</span> <span class="n">Address</span><span class="p">:</span> <span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="mf">00.4</span>                                                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Function</span> <span class="n">Type</span><span class="p">:</span> <span class="n">virtual</span>                                                                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Memory</span> <span class="n">Physical</span> <span class="n">Size</span><span class="p">:</span> <span class="mf">500.00</span> <span class="n">MiB</span>                                                                 <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="remove-all-the-virtual-gpus-on-the-specified-gpu">
<h3>Remove all the virtual GPUs on the specified GPU<a class="headerlink" href="#remove-all-the-virtual-gpus-on-the-specified-gpu" title="Permalink to this headline"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">xpumcli</span> <span class="n">vgpu</span> <span class="o">-</span><span class="n">d</span> <span class="mi">0</span> <span class="o">-</span><span class="n">r</span>
<span class="n">CAUTION</span><span class="p">:</span> <span class="n">we</span> <span class="n">are</span> <span class="n">removing</span> <span class="nb">all</span> <span class="n">virtual</span> <span class="n">GPUs</span> <span class="n">on</span> <span class="n">device</span> <span class="mi">0</span><span class="p">,</span> <span class="n">please</span> <span class="n">make</span> <span class="n">sure</span> <span class="nb">all</span> <span class="n">vGPU</span><span class="o">-</span><span class="n">assigned</span> <span class="n">virtual</span> <span class="n">machines</span> <span class="n">are</span> <span class="n">shut</span> <span class="n">down</span><span class="o">.</span>
<span class="n">Please</span> <span class="n">confirm</span> <span class="n">to</span> <span class="n">proceed</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">n</span><span class="p">)</span> <span class="n">y</span>
<span class="n">All</span> <span class="n">virtual</span> <span class="n">GPUs</span> <span class="n">on</span> <span class="n">the</span> <span class="n">device</span> <span class="mi">0</span> <span class="n">are</span> <span class="n">removed</span><span class="o">.</span>

</pre></div>
</div>
</section>
<section id="the-advanced-configuration-of-virtual-gpus">
<h3>The advanced configuration of virtual GPUs<a class="headerlink" href="#the-advanced-configuration-of-virtual-gpus" title="Permalink to this headline"></a></h3>
<p>The advanced configurations of the virtual GPU are in the file, /usr/lib/xpum/config/vgpu.conf. You may change your virtual GPU settings according to the created virtual GPU number. For example, the NAME “56c0N16” means the settings for creating 16 vGPU on Flex 170 GPU (Device ID: 0x56c0). Here is the detailed info of the virtual GPU settings.</p>
<ul class="simple">
<li><p>VF_CONTEXTS: Number of contexts per virtual GPU, used for KMD-GuC communication</p></li>
<li><p>VF_DOORBELLS: Number of doorbells per virtual GPU, used for KMD-GuC communication</p></li>
<li><p>VF_GGTT: GGTT(Global Graphics Translation Table) size per virtual GPU, used for memory mapping, in bytes</p></li>
<li><p>VF_EXEC_QUANT_MS: Denotes the amount of time that a particular virtual GPU will be allocated in the per vGPU time-slicing round-robin, in milliseconds</p></li>
<li><p>VF_PREEMPT_TIMEOUT_US: Denotes the amount of time that the GuC Scheduler will wait for context preemptions on active engines to complete, engine reset will be triggered anyway at the expiry of timeout, in microseconds</p></li>
<li><p>PF_EXEC_QUANT_MS: Denotes the amount of time that the physical GPU will be allocated in the per virtual GPU time-slicing round-robin, in milliseconds</p></li>
<li><p>PF_PREEMPT_TIMEOUT: Denotes the amount of time that the GuC Scheduler will wait for context preemptions on active engines to complete, engine reset will be triggered anyway at the expiry of timeout, in microseconds</p></li>
<li><p>SCHED_IF_IDLE: 0: flexible scheduling, the virtual GPU will be allocated its time slice only if it has pending workload, and the time slice shifts to next virtual GPU when all workload submitted by current virtual GPU are completed. 1: strict scheduling, the virtual GPU will always be allocated its time slice even if it’s idle.</p></li>
<li><p>DRIVERS_AUTOPROBE: Determines whether the newly enabled virtual GPUs are immediately bound to a driver, 0 or 1</p></li>
</ul>
</section>
<section id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>XPU manager (in Host OS Linux) cannot discover and monitor a virtual GPU if it is assigned to an active VM guest or sriov_drivers_autoprobe is set to 0. If only 1 virtual GPU was created, end users may understand virtual GPU utilizations by looking at metrics of PF.</p></li>
<li><p>XPU manager (in Guest OS Windows) can only monitor GPU utilization, other metrics are not available</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="REST_README.html" class="btn btn-neutral float-left" title="XPUM REST API Setup Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="restful.html" class="btn btn-neutral float-right" title="Restful API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Intel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>